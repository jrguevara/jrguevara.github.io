<!DOCTYPE html><html lang="es" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Comandos Docker" /><meta property="og:locale" content="es" /><meta name="description" content="Docker" /><meta property="og:description" content="Docker" /><link rel="canonical" href="https://jrguevara.github.io/posts/comandos-docker/" /><meta property="og:url" content="https://jrguevara.github.io/posts/comandos-docker/" /><meta property="og:site_name" content="jrCoding Docs" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-03-14T23:00:00-06:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Comandos Docker" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-03-14T23:00:00-06:00","datePublished":"2023-03-14T23:00:00-06:00","description":"Docker","headline":"Comandos Docker","mainEntityOfPage":{"@type":"WebPage","@id":"https://jrguevara.github.io/posts/comandos-docker/"},"url":"https://jrguevara.github.io/posts/comandos-docker/"}</script><title>Comandos Docker | jrCoding Docs</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="jrCoding Docs"><meta name="application-name" content="jrCoding Docs"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/images/me.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">jrCoding Docs</a></div><div class="site-subtitle font-italic">A Doc site for my projects</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>INICIO</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIAS</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVOS</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/jrguevara" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="javascript:location.href = 'mailto:' + ['jr.guevara','outlook.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Inicio </a> </span> <span>Comandos Docker</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Comandos Docker</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1678856400" data-df="DD/MM/YYYY" data-toggle="tooltip" data-placement="bottom"> 14/03/2023 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/jr.guevara">Jaime Guevara</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="9584 words"> <em>53 min</em> read</span></div></div></div><div class="post-content"><h1 id="docker">Docker</h1><p>Docker sirver para crear contenedores ligeros y portables para las aplicaciones/software/webs se puedan ejecutar en cualquier maquina donde docker se encuentre instalado, independiente del sistema operativo que se este ejecutando en ese momento.</p><blockquote><p>Un contenedor es una “caja” donde se encontrara todo lo que la aplicacion necesita para poder ejecutarse, ademas de la propia aplicacion en si misma que se esta desarrollando.</p></blockquote><h2 id="imagen-vs-contenedor"><span class="mr-2">Imagen VS Contenedor</span><a href="#imagen-vs-contenedor" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Docker sirve para distribuir “Maquinas”.</p><ul><li>Imagen: Lo que se distribuye.<li>Contenedor: Lo que se ejecuta.</ul><p>Desde una misma imagen se puede crear multiples contenedores.</p><p>Ademas es posible generar dos tipos de contenedores, los cuales son:</p><ul><li><p>windows: no lleva kernel de linux, por lo cual solo es recomendable para aplicaciones que requieran ejecutarse exclusivamente en windows server o similar.</p><li><p>Linux: incluye una capa del kernel de lix para ejecutar en cualquier sistema.</p></ul><h2 id="docker-servicio---comandos"><span class="mr-2">Docker Servicio - Comandos</span><a href="#docker-servicio---comandos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="docker-exec"><span class="mr-2">Docker Exec</span><a href="#docker-exec" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>Exec</strong> es un comando de administracion de contenedores.</p><p>Permite ejecutar un comando sobre un contenedor que no posea entorno interactivo para trabajar, ejemplo:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nb">exec</span> <span class="nf">ID</span><span class="nv">/Nombre_Contenedor</span> <span class="nf">echo</span> <span class="nf">hola-mundo</span>
</pre></table></code></div></div><p>El resultado de esto seria.</p><pre><code class="language-t"># Ejemplo 1
[XXXX@XXX ~]# docker exec ubuntu echo hola-mundo
hola-mundo
# Ejemplo 2
[XXXX@XXX ~]# docker exec -it Nombre_Contenedor bash
</code></pre><blockquote><p>Este ejemplo se aplica a un contenedor que ya este en ejecucion.</p></blockquote><h3 id="docker-logs"><span class="mr-2">Docker Logs</span><a href="#docker-logs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Permite ver que esta imprimiendo en pantalla un contenedor que se encuentre en segundo plano(Background).</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">logs</span> <span class="nf">ID</span><span class="nv">/Nombre_Contendor</span>
</pre></table></code></div></div><blockquote><p>El unico problema del logs es que mostrara todo lo que ha realizado el contenedor</p></blockquote><p>Para Ver ultimas lineas que esta ejecutando el contenedor, las que serian de importancia y evitar que muestre toda la informacion se ocupa el <strong>–tail</strong> mas el numero de lineas que desea ver.</p><p>Ejemplo</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>docker logs ID/Nombre_Contenedor --Tail N°_Lineas

docker logs 1234asd --Tail 20
</pre></table></code></div></div><blockquote><p>Mostrara las 20 ultimas lineas ejecutadas por el contenedor.</p></blockquote><h3 id="docker-top"><span class="mr-2">Docker Top</span><a href="#docker-top" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Permite saber cual es el proceso que mas consume recursos dentro de un contenedor.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>docker top ID/Nombre_Container
</pre></table></code></div></div><h3 id="docker-stats"><span class="mr-2">Docker stats</span><a href="#docker-stats" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Permite ver informacion sobre un contenedor, como uso de CPU y memoria, ademas de otras cosas.</p><pre><code class="language-t">docker stats ID/Nombre_Contenedor
</code></pre><h3 id="docker-inspect"><span class="mr-2">Docker Inspect</span><a href="#docker-inspect" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Permite recuperar la informacion de una imagen o contenedor, a nivel de propiedades y caracteristicas.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">inspect</span> <span class="nf">ID_Contenedor</span><span class="nv">/Imagen</span>
</pre></table></code></div></div><p>Este comando entregara mucha informacion por lo cual es recomendable enviar dicha informacion a un archivo, para su posterior inspeccion`.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">inspect</span> <span class="nf">ID_Contenedor</span><span class="nv">/Imagen</span> <span class="p">&gt;</span> <span class="nf">Nombre_Archivo.txt</span>
</pre></table></code></div></div><blockquote><p>La informacion se entrega en formato <strong>JSON</strong>.</p></blockquote><p>o realizar una busqueda especifica como la direccion IP.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">inspect</span> <span class="nf">--format='</span><span class="p">{</span> <span class="p">{</span><span class="nf">range.NetworkSettings.Networks</span><span class="p">}</span> <span class="p">}</span> <span class="p">{</span> <span class="p">{</span><span class="nf">.IPAddress</span><span class="p">}</span> <span class="p">}</span> <span class="p">{</span> <span class="p">{</span><span class="nb">end</span><span class="p">}</span> <span class="p">}</span><span class="nf">'</span> <span class="nf">ID</span><span class="nv">/Nombre_Contenedor</span>
</pre></table></code></div></div><blockquote><p>La informacion que entrega es variada como la imagen con la cual el contenedor se genero, fecha de creacion, plataforma(linux-windows),su red, entre muchos otros.</p></blockquote><h3 id="docker-image"><span class="mr-2">Docker image</span><a href="#docker-image" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Sirve para administrar imagenes, agrupa todos los comandos que tienen relacion con las imagenes y sus Opciones son las siguientes:</p><div class="table-wrapper"><table><thead><tr><th style="text-align: center">Comando<th style="text-align: center">Descripcion<th> <tbody><tr><td style="text-align: center">build<td style="text-align: center">Construir una imagen a partir de un Dockerfile<td> <tr><td style="text-align: center">history<td style="text-align: center">Mostrar el historial de una imagen<td> <tr><td style="text-align: center">import<td style="text-align: center">Importar el contenido de una tarball para crear una imagen del sistema de archivos<td> <tr><td style="text-align: center">inspect<td style="text-align: center">Mostrar información detallada sobre una o más imágenes<td> <tr><td style="text-align: center">load<td style="text-align: center">Cargar una imagen de un archivo tar o STDIN<td> <tr><td style="text-align: center">ls<td style="text-align: center">Listar imágenes<td> <tr><td style="text-align: center">prune<td style="text-align: center">Eliminar imágenes no utilizadas<td> <tr><td style="text-align: center">pull<td style="text-align: center">Extraer una imagen o un repositorio de un registro<td> <tr><td style="text-align: center">push<td style="text-align: center">Empujar una imagen o un repositorio a un registro<td> <tr><td style="text-align: center">rm<td style="text-align: center">Eliminar una o más imágenes<td> <tr><td style="text-align: center">save<td style="text-align: center">Guardar una o más imágenes en un archivo tar (transmitidas a STDOUT por defecto)<td> <tr><td style="text-align: center">tag<td style="text-align: center">Cree una etiqueta TARGET_IMAGE que haga referencia a SOURCE_IMAGE<td> </table></div><p>Se puede considerar una alternativa a ciertos comandos. Ejemplo</p><div class="table-wrapper"><table><thead><tr><th style="text-align: center">Opcion 1<th style="text-align: center">Opcion 2<tbody><tr><td style="text-align: center">docker image ls<td style="text-align: center">docker images<tr><td style="text-align: center">docker image rm<td style="text-align: center">docker rm</table></div><h3 id="docker-container"><span class="mr-2">Docker Container</span><a href="#docker-container" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Al igual que docker image, docker container agrupa todos los comandos relacionados con los contenedores.</p><p><strong>Comandos</strong></p><div class="table-wrapper"><table><thead><tr><th style="text-align: center">Comando<th style="text-align: center">Descripcion<tbody><tr><td style="text-align: center">attach<td style="text-align: center">Conecte flujos de entrada, salida y error estándar locales a un contenedor en funcionamiento.<tr><td style="text-align: center">commit<td style="text-align: center">Crear una nueva imagen a partir de los cambios de un contenedor.<tr><td style="text-align: center">cp<td style="text-align: center">Copiar archivos/carpetas entre un contenedor y el sistema de archivos local<tr><td style="text-align: center">create<td style="text-align: center">Crear un nuevo contenedor<tr><td style="text-align: center">diff<td style="text-align: center">Inspeccionar cambios en archivos o directorios en el sistema de archivos de un contenedor<tr><td style="text-align: center">exec<td style="text-align: center">Ejecutar un comando en un contenedor en ejecución<tr><td style="text-align: center">export<td style="text-align: center">Exportar el sistema de archivos de un contenedor como un archivo tar<tr><td style="text-align: center">inspect<td style="text-align: center">Mostrar información detallada sobre uno o más contenedores<tr><td style="text-align: center">kill<td style="text-align: center">Matar uno o más contenedores en marcha<tr><td style="text-align: center">logs<td style="text-align: center">Obtener los logs de un contenedor<tr><td style="text-align: center">ls<td style="text-align: center">Listar Contenedores<tr><td style="text-align: center">pause<td style="text-align: center">Pausa todos los procesos dentro de uno o más contenedores<tr><td style="text-align: center">port<td style="text-align: center">Listar mapeos de puertos o un mapeo específico para el contenedor<tr><td style="text-align: center">prune<td style="text-align: center">Retirar todos los contenedores parados<tr><td style="text-align: center">rename<td style="text-align: center">Renombrar un contenedor<tr><td style="text-align: center">restart<td style="text-align: center">Reiniciar uno o más contenedores<tr><td style="text-align: center">rm<td style="text-align: center">Retirar uno o más contenedores<tr><td style="text-align: center">run<td style="text-align: center">Ejecutar un comando en un nuevo contenedor<tr><td style="text-align: center">stats<td style="text-align: center">Mostrar una secuencia en vivo de estadísticas de uso de recursos del contenedor(es)<tr><td style="text-align: center">stop<td style="text-align: center">Parar uno o más contenedores en ejecución<tr><td style="text-align: center">top<td style="text-align: center">Mostrar los procesos en ejecución de un contenedor<tr><td style="text-align: center">unpause<td style="text-align: center">Despausa todos los procesos dentro de uno o más contenedores<tr><td style="text-align: center">update<td style="text-align: center">Actualizar la configuración de uno o más contenedores<tr><td style="text-align: center">wait<td style="text-align: center">Bloquear hasta que uno o más contenedores se detengan, luego imprimir sus códigos de salida</table></div><p>Se puede considerar una alternativa a ciertos comandos. Ejemplo</p><div class="table-wrapper"><table><thead><tr><th style="text-align: center">Opcion 1<th style="text-align: center">Opcion 2<tbody><tr><td style="text-align: center">docker container ls<td style="text-align: center">docker ps<tr><td style="text-align: center">docker container ls -a<td style="text-align: center">docker ps -a</table></div><h3 id="docker-help"><span class="mr-2">Docker –help</span><a href="#docker-help" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>En caso de necesitar ayuda para saber que hace un comando se agrega el <strong>–help</strong>.</p><p>Ejemplo</p><pre><code class="language-t">[XXXX@XXX ~]# docker conainer ls --help

Usage:  docker container ls [OPTIONS]

List containers

Aliases:
  ls, ps, list

Options:
  -a, --all             Show all containers (default shows just running)
  -f, --filter filter   Filter output based on conditions provided
      --format string   Pretty-print containers using a Go template
  -n, --last int        Show n last created containers (includes all
                        states) (default -1)
  -l, --latest          Show the latest created container (includes all
                        states)
      --no-trunc        Don't truncate output
  -q, --quiet           Only display numeric IDs
  -s, --size            Display total file sizes
</code></pre><h3 id="ejemplo-centos-7ubuntu-16"><span class="mr-2">Ejemplo Centos 7/Ubuntu 16</span><a href="#ejemplo-centos-7ubuntu-16" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><strong>Docker status</strong>(<strong>systemctl status docker</strong>): sirve para saber el estado de docker en la maquina.<li><strong>Docker start</strong>(<strong>systemctl start docker</strong>): arranca el servicio de docker(en linux).<li><strong>Docker stop</strong>(<strong>systemctl stop docker</strong>): detiene el servicio.<li><strong>Docker enable</strong>(<strong>systemctl enable docker</strong>): activa docker, en caso de reinicio del sistema este se ejecutara de manera automatica.<li><strong>Docker –version:</strong> sirve para saber que version de docker se tiene instalada actualmente en la maquina.<li><strong>Docker info:</strong> entrega multiples datos(Espacio, caracteristicas, etc), entre los cuales se destaca la cantidad de conetenedores e imagenes y el estado de estos.<li><strong>Docker run</strong>: cada vez que se ejecuta este comando, crea un nuevo contenedor, no recicla contenedores ejecutados previamente.</ul><h1 id="imagenes">imagenes</h1><h2 id="buscar-imagen-docker-por-cmd"><span class="mr-2">Buscar imagen docker por CMD</span><a href="#buscar-imagen-docker-por-cmd" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>con este comando se buscara y entregara una lista de imagenes que se encuentran en el HUB.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">search</span> <span class="nf">NombreBuscar</span>
</pre></table></code></div></div><blockquote><p>Retorna como maximo 25 resultados.</p></blockquote><h2 id="descargar-imagen"><span class="mr-2">Descargar imagen</span><a href="#descargar-imagen" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>para descargar una imagen del HUB de docker al entorno local se ocupa el siguiente comando.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">pull</span> <span class="nf">NombreImagen</span>
</pre></table></code></div></div><h2 id="ver-imagenes-en-repositorio-local"><span class="mr-2">Ver imagenes en repositorio local</span><a href="#ver-imagenes-en-repositorio-local" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>para ver las imagenes desdecargadas que tenemos en nuestro equipo, se ocupa el siguiente comando.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">images</span>
</pre></table></code></div></div><h2 id="ver-ids-de-las-imagenes-en-repositorio-local"><span class="mr-2">Ver IDs de las imagenes en repositorio local</span><a href="#ver-ids-de-las-imagenes-en-repositorio-local" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Entregara una lista de todos los id de todas las imagenes que tengamos en el repositorio local de la maquina.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">images</span> <span class="nf">-q</span>
</pre></table></code></div></div><h2 id="filtrar-imagenes"><span class="mr-2">Filtrar imagenes</span><a href="#filtrar-imagenes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Se aplica de manera similar que al filtrar los contenedores.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">images</span> <span class="nf">-f</span>
</pre></table></code></div></div><h2 id="eliminar-una-imagen"><span class="mr-2">Eliminar una Imagen</span><a href="#eliminar-una-imagen" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para eliminar una imagen que se encuentre en nuestro repositorio local se eejcuta el siguiente comando:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">rmi</span> <span class="nf">ID</span><span class="nv">/Nombre_Contenedor</span>
</pre></table></code></div></div><blockquote><p><strong>Importante</strong></p><p>No es posible eliminar una imagen, si se creo un contenedor con dicha imagen. En resumen, si la imagen tiene asociada un contenedor, esta no podra eliminarse.</p><p>En caso de querer borrar la imagen asociada, se debera eliminar primero el contenedor, que esta coupando dicha imagen.</p><p>Si aun asi se desea eliminar la imagen asociada, antes que el contenedor el comando se debe forzar con la bandera <strong>‘-f’</strong>.</p></blockquote><h2 id="borrar-todas-las-imagenes"><span class="mr-2">Borrar todas las imagenes</span><a href="#borrar-todas-las-imagenes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>con este comando se eliminaran TODAS las imagenes que se tengan almacenadas, en el repositorio local.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">rmi</span> <span class="nf">$</span><span class="s">(docker images -q)</span>
</pre></table></code></div></div><h2 id="historial-cambios-imagen"><span class="mr-2">Historial cambios imagen</span><a href="#historial-cambios-imagen" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para saber los cambios que ha sufrido una imagen en su proceso de construccion a lo largo del tiempo se puede ocupar:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">image</span> <span class="nf">history</span> <span class="nf">Nombre_Imagen</span>
</pre></table></code></div></div><h1 id="contenedores">Contenedores</h1><h2 id="crear-contenedor"><span class="mr-2">Crear contenedor</span><a href="#crear-contenedor" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para crear un contenedor se ocupa el siguiente comando.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nb">run</span> <span class="nf">nombre-Contenedor</span>
</pre></table></code></div></div><blockquote><p>Un contenedor se inicia desde una imagen.</p><p>Cada vez que se ocupa docker run se crea un nuevo contenedor, no reutiliza contenedores previamente ejecutados, aunque se ocupe la misma imagen.</p></blockquote><ul><li>Ejemplo:</ul><p>Al ejecutar el siguiente comando se creara un contenedor a partir de una imagen que especifiquemos con su respectivo nombre ejemplo “hello-world”(plantilla).</p><p>Si la imagen que especificamos no esta en nuestro “repositorio” de imagenes local, docker procedera a descargarla desde el HUB.docker</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nb">run</span> <span class="nf">hello-world</span>
</pre></table></code></div></div><blockquote><p>Docker Hub es un registro online de imagenes.</p></blockquote><h2 id="crear-contenedor-con-nombre"><span class="mr-2">Crear contenedor con nombre</span><a href="#crear-contenedor-con-nombre" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para crear un contenedor con nombre se ocupa el comando <strong>–name</strong>, ejemplo:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">--name</span> <span class="nf">ubuntu_personal</span> <span class="nf">ubuntu</span> <span class="nf">bash</span>
                      <span class="nf">Nombre_Asignado</span> <span class="nf">Imagen</span>
</pre></table></code></div></div><h2 id="crear-contenedor-interactivo"><span class="mr-2">Crear Contenedor Interactivo</span><a href="#crear-contenedor-interactivo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Permite crear un contenedor interactivo si la imagen asi lo permite con el comando <code class="language-plaintext highlighter-rouge">-it</code>(<strong>i</strong> de interactivo, <strong>t</strong> de terminal), esto permite ingresar he interactuar con el contenedor(si este lo permite), ejemplo trabajar en la terminal de una imagen como ubuntu.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">ubuntu</span>
</pre></table></code></div></div><blockquote><p>La imagen contiene una version minima de ubuntu.</p></blockquote><h2 id="crear-contenedor-en-segundo-plano-background"><span class="mr-2">Crear contenedor en segundo plano (Background)</span><a href="#crear-contenedor-en-segundo-plano-background" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para mantener en ejecucion un container en segundo plano, sin tener que mantener activa una ventana de comandos para interactuar con el(entorno interactivo).</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-d</span> <span class="nf">nginx</span>
</pre></table></code></div></div><blockquote><p>La opción -d ejecuta el contenedor en modo independiente. También es equivalente a -d=true.</p><p>Un contenedor en modo independiente no puede ser removido automáticamente cuando se detiene, esto significa que no se puede usar la opción –rm en combinación con la opción -d.</p></blockquote><h2 id="crear-contenedor-con-eliminado-automatico"><span class="mr-2">Crear contenedor con eliminado automatico</span><a href="#crear-contenedor-con-eliminado-automatico" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para evitar que los contenedores detenidos se acumulen, esta la opcion que se eliminen de manera automatica, una vez finalizada su funcion, el cual es agregandole el <strong>–rm</strong> al comando.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">--rm</span> <span class="nf">--name</span> <span class="nf">Nombre_Contenedor</span> <span class="nf">Nombre_imagen</span>
</pre></table></code></div></div><blockquote><p>Ingresara en modo interactivo y cuando uno salga de ese modo el contenedor se eliminara.</p></blockquote><h2 id="ingresar-a-contenedor-en-modo-interactivo"><span class="mr-2">Ingresar a contenedor en modo interactivo</span><a href="#ingresar-a-contenedor-en-modo-interactivo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para ingresar a un contenedor que posea el modo interactivo y que ademas se ha creado con anterioridad y este en estado de detenido ejemplo, ubuntu, se ejecuta el siguiente comando para iniciarlo y ingresar a esté. Asi no se creara un nuevo contenedor.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>docker start -i ID_Contenedor
</pre></table></code></div></div><blockquote><p>Cuando el contenedor se detiene no se eliminan de manera automatica.</p></blockquote><h2 id="salir-de-un-contenedor-sin-detener-ejecucion"><span class="mr-2">Salir de un Contenedor sin detener ejecucion</span><a href="#salir-de-un-contenedor-sin-detener-ejecucion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>para salir del container sin detenerlo y que asi pueda seguir ejecutandose se ocupa la siguiente combinacion de teclado.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">Ctrl+P+Q</span>
</pre></table></code></div></div><h2 id="detener-contenedor"><span class="mr-2">Detener contenedor</span><a href="#detener-contenedor" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para detener un contenedor que se encuentre en ejecucion, se ocupa:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">stop</span> <span class="nf">ID_Contenedor</span>
</pre></table></code></div></div><h2 id="detener-todos-los-contenedores"><span class="mr-2">Detener todos los contenedores</span><a href="#detener-todos-los-contenedores" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>para detener todos los conteendores que se encuentren en ejecucion, se ocupa lo sigueinte.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">stop</span> <span class="nf">$</span><span class="s">(docker ps -a -q)</span>
</pre></table></code></div></div><blockquote><p>Probado en PowerShell</p></blockquote><h2 id="ver-contenedores-en-ejecucion"><span class="mr-2">Ver contenedores en ejecucion</span><a href="#ver-contenedores-en-ejecucion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para poder ver los contenedores que se estan ejecutando en la maquina se puede ocupar una de las siguientes opciones.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nf">#</span> <span class="nf">Primera</span> <span class="nf">Opcion</span>
<span class="nf">docker</span> <span class="nf">container</span> <span class="nf">ls</span>

<span class="nf">#</span> <span class="nf">Segunda</span> <span class="nf">Opcion</span>
<span class="nf">docker</span> <span class="nf">ps</span>
</pre></table></code></div></div><h2 id="ver-contenedores-detenidos"><span class="mr-2">Ver contenedores detenidos</span><a href="#ver-contenedores-detenidos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para ver los contenedores que estan creados pero al mismo tiempo detenidos se ocupa.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">ps</span> <span class="nf">-a</span>
</pre></table></code></div></div><blockquote><p>Los contendores al terminar de ejecutarse no se eliminan si no que pasan a un estado de detenido.</p><p>Con este comando tambien se mostrara los que estan en ejecucion.</p></blockquote><h2 id="ver-ultimo-contenedor-arrancado"><span class="mr-2">Ver ultimo contenedor arrancado</span><a href="#ver-ultimo-contenedor-arrancado" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>se puede visualizar el ultimo contenedor que ha realizado una operacion.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">ps</span> <span class="nf">-l</span>
</pre></table></code></div></div><h2 id="ver-ultimos-contenedores-que-se-han-ejecutadocantidad"><span class="mr-2">Ver ultimos contenedores que se han ejecutado(cantidad)</span><a href="#ver-ultimos-contenedores-que-se-han-ejecutadocantidad" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Con esta opcion se podra ver los ultimos contenedores que han realizado alguna operacion, ademas se puede especificar la cantidad que se desea mostrar.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">ps</span> <span class="nf">-n</span> <span class="mf">4</span>
</pre></table></code></div></div><blockquote><p>mostrara los ultimos 4 contenedores que hayan realizado alguna operacion.</p><p>Este numero(4) se puede cambiar por cualquiera dependiendo de la necesidad.</p></blockquote><h2 id="ver-ids-de-containers"><span class="mr-2">Ver IDs de containers</span><a href="#ver-ids-de-containers" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>para visualizar solamente los ID, y asi poder crear operaciones automaticas</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nf">#</span> <span class="nf">Opcion</span> <span class="mf">1</span>
<span class="nf">docker</span> <span class="nf">ps</span> <span class="nf">-a</span> <span class="nf">-q</span>
<span class="nf">#</span> <span class="nf">Opcion</span> <span class="mf">2</span>
<span class="nf">docker</span> <span class="nf">ps</span> <span class="nf">-aq</span>
</pre></table></code></div></div><blockquote><p>con esta opcion mostrara todas las IDs de los contenedores, independiente del estado en el que se encuentre.</p></blockquote><h2 id="ver-tamaño-del-contenedor"><span class="mr-2">Ver tamaño del contenedor</span><a href="#ver-tamaño-del-contenedor" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para poder ver el tamaño que ocupa un contendor en el sistema se ocupa el <strong>-S</strong>, en este caso, se presenta un ejemplo para ver el tamaño de los ultimos 3 contenedores.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">ps</span> <span class="nf">-a</span> <span class="nf">-n</span> <span class="mf">3</span> <span class="nf">-s</span>
</pre></table></code></div></div><h2 id="filtrar-lista-de-contenedoresfilter--f"><span class="mr-2">Filtrar lista de contenedores(–filter, -f)</span><a href="#filtrar-lista-de-contenedoresfilter--f" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Permite agregar una o mas opciones a la busqueda de contenedores, al momento de realizar una lista de estos. A continuacion se muestran las opciones disponibles.</p><div class="table-wrapper"><table><thead><tr><th style="text-align: center">Filtro<th style="text-align: center">Descripcion<tbody><tr><td style="text-align: center"><strong><code class="language-plaintext highlighter-rouge">id</code></strong><td style="text-align: center">ID del contenedor<tr><td style="text-align: center"><strong><code class="language-plaintext highlighter-rouge">name</code></strong><td style="text-align: center">Nombre del contenedor<tr><td style="text-align: center"><strong><code class="language-plaintext highlighter-rouge">label</code></strong><td style="text-align: center">Una cadena arbitraria que representa una llave o un par llave-valor. Expresado como <code class="language-plaintext highlighter-rouge">&lt;key&gt;</code> o <code class="language-plaintext highlighter-rouge">&lt;key&gt;=&lt;value&gt;</code><tr><td style="text-align: center"><strong><code class="language-plaintext highlighter-rouge">exited</code></strong><td style="text-align: center">Un número entero que representa el código de salida del contenedor. Sólo es útil con <code class="language-plaintext highlighter-rouge">--all</code><tr><td style="text-align: center"><strong><code class="language-plaintext highlighter-rouge">status</code></strong><td style="text-align: center">uno de <code class="language-plaintext highlighter-rouge">created</code>, <code class="language-plaintext highlighter-rouge">restarting</code>, <code class="language-plaintext highlighter-rouge">running</code>, <code class="language-plaintext highlighter-rouge">removing</code>, <code class="language-plaintext highlighter-rouge">paused</code>, <code class="language-plaintext highlighter-rouge">exited</code>, o <code class="language-plaintext highlighter-rouge">dead</code><tr><td style="text-align: center"><strong><code class="language-plaintext highlighter-rouge">ancestor</code></strong><td style="text-align: center">Filtra los contenedores que comparten una determinada imagen como ancestros. Expresado como <code class="language-plaintext highlighter-rouge">&lt;image-name&gt;[:&lt;tag&gt;]</code>, <code class="language-plaintext highlighter-rouge">&lt;image id&gt;</code>, o <code class="language-plaintext highlighter-rouge">&lt;image@digest&gt;</code><tr><td style="text-align: center"><strong><code class="language-plaintext highlighter-rouge">before</code></strong> o <strong><code class="language-plaintext highlighter-rouge">since</code></strong><td style="text-align: center">Filtra los contenedores creados antes o después de una identificación o nombre de contenedor determinado<tr><td style="text-align: center"><strong><code class="language-plaintext highlighter-rouge">volume</code></strong><td style="text-align: center">Filtros que funcionan con contenedores que han montado un volumen determinado o un soporte de fijación<tr><td style="text-align: center"><strong><code class="language-plaintext highlighter-rouge">network</code></strong><td style="text-align: center">Filtros que funcionan con contenedores conectados a una red determinada<tr><td style="text-align: center"><strong><code class="language-plaintext highlighter-rouge">publish</code></strong> o <strong><code class="language-plaintext highlighter-rouge">expose</code></strong><td style="text-align: center">Filtra los contenedores que publican o exponen un puerto determinado. Expresado como <code class="language-plaintext highlighter-rouge">&lt;port&gt;[/&lt;proto&gt;]</code> o <code class="language-plaintext highlighter-rouge">&lt;startport-endport&gt;/[&lt;proto&gt;]</code><tr><td style="text-align: center"><strong><code class="language-plaintext highlighter-rouge">health</code></strong><td style="text-align: center">Filtra los contenedores en función de su estado de salud. Uno de <code class="language-plaintext highlighter-rouge">starting</code>, <code class="language-plaintext highlighter-rouge">healthy</code>, <code class="language-plaintext highlighter-rouge">unhealthy</code> or <code class="language-plaintext highlighter-rouge">none</code>.<tr><td style="text-align: center"><strong><code class="language-plaintext highlighter-rouge">isolation</code></strong><td style="text-align: center">Sólo <code class="language-plaintext highlighter-rouge">daemon</code> de Windows. Uno de <code class="language-plaintext highlighter-rouge">dafault</code>, <code class="language-plaintext highlighter-rouge">process</code> o <code class="language-plaintext highlighter-rouge">hyperv</code><tr><td style="text-align: center"><strong><code class="language-plaintext highlighter-rouge">is-task</code></strong><td style="text-align: center">Filtra los contenedores que son una “tarea” para un servicio. Opción booleana (<code class="language-plaintext highlighter-rouge">true</code> o <code class="language-plaintext highlighter-rouge">false</code>)</table></div><p>Para obtener una descripcion mas detallada revisar el siguiente <a href="https://docs.docker.com/engine/reference/commandline/ps/#filtering">enlace filtros.</a></p><p>Ejemplo con filtro <code class="language-plaintext highlighter-rouge">name</code>.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">ps</span> <span class="nf">-a</span> <span class="nf">-f</span> <span class="nf">"name=XX"</span>
</pre></table></code></div></div><blockquote><p><strong>XX</strong> hace referencia al nombre del contenedor</p></blockquote><h2 id="eliminar-un-contenedor"><span class="mr-2">Eliminar un Contenedor</span><a href="#eliminar-un-contenedor" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para eliminar un contenedor que se encuentre detenido se ocupa el siguiente comando:</p><p><strong>Opcion 1</strong></p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">rm</span> <span class="nf">ID_Contenedor</span>
</pre></table></code></div></div><p><strong>Opcion 2</strong></p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">rm</span> <span class="nf">Nombre_Contenedor</span>
</pre></table></code></div></div><p>En el extraño caso que se desee eliminar un contenedor que este en ejecucion se debe forzar la eliminacion, mediante el siguiente comando:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">rm</span> <span class="nf">ID_Contenedor</span><span class="nv">/Nombre_Contenedor</span> <span class="nf">-f</span>
</pre></table></code></div></div><h3 id="eliminar-todos-los-contenedores"><span class="mr-2">Eliminar todos los contenedores</span><a href="#eliminar-todos-los-contenedores" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Elimina todos los contenedores que hemos creado.</p><p>En windows(Powershell)</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">rm</span> <span class="nf">$</span><span class="s">(docker ps -a -q)</span>
</pre></table></code></div></div><blockquote><p>Si tenemos algun contenedor en ejecucion se debe usar <code class="language-plaintext highlighter-rouge">-f</code>, para forzar la eliminacion o detener la ejecucion.</p></blockquote><h3 id="historial-cambios-contenedor"><span class="mr-2">Historial Cambios Contenedor</span><a href="#historial-cambios-contenedor" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Para saber que cambios,instalaciones o modificaciones a sufrido un contenedor, condera los archivos y directorios.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nf">#</span> <span class="nf">Opcion</span> <span class="mf">1</span>
<span class="nf">docker</span> <span class="nf">diff</span> <span class="nf">Nombre_Contenedor</span>
<span class="nf">#Opcion</span> <span class="mf">2</span>
<span class="nf">docker</span> <span class="nf">container</span> <span class="nf">diff</span> <span class="nf">Nombre_Contenedor</span>
</pre></table></code></div></div><p>Los cambios se muestran con una letra al principio indicando que se le realizo:</p><ul><li><strong>A(Adicion)</strong>: Para archivo nuevo.<li><strong>C(Modificacion)</strong>: Para archivo modificado.<li><strong>D(Eliminado)</strong>: Para archivo eliminado</ul><h1 id="puertos-docker">Puertos Docker</h1><p>Los contenedores deben ser accesibles desde afuera del contenedor para poder utilizarse(una API por ejemplo o apache), para esto se ocupan los puertos, estos por defecto son privados y no es posible acceder a ellos, por lo tanto es necesario pasarlos a publico y mapearlo con un puerto del host/sistema que aloja el contenedor.</p><h3 id="convertir-puertos-en-publico"><span class="mr-2">Convertir puertos en publico</span><a href="#convertir-puertos-en-publico" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>al iniciar un contenedor y que este tenga luspuertos en estado publico y no privado, que es por defecto se le agrega el <strong>-P</strong>, al comando.</p><pre><code class="language-t">docker run -d -P nombre_imagen
</code></pre><blockquote><p>Al ejecutar el comando la “P” debe ser mayuscula o entregara un error.</p><p>para confirmar que el puerto es publico, se ejecuta <strong>docker ps</strong> y mostrara una columna llamada <strong>PORTS</strong>.</p><p>Con P(Mayuscula), docker se encargara de mapear los puertos, por lo tanto el numero será aleatorio y p(minusula) para indicar un puerto en especifico.</p></blockquote><h4 id="explicacion-columna-ports"><span class="mr-2">Explicacion Columna Ports</span><a href="#explicacion-columna-ports" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>0.0.0.0:24312-&gt;80/tcp</p><ul><li><strong>0.0.0.0</strong>: se podra acceder por cualquier direccion IP que posea el equipo. Este puede ser cambiado a una direccion especifica si se posee mas de una IP en el equipo.<li><strong>24312</strong>: Es el puerto del equipo que aloja docker, y el cual esta mapeado con el puerto 80 del contenedor.<li><strong>80/tcp</strong>: es el puerto del contenedor.</ul><blockquote><p>Para acceder al contenedor que tenga habilitada esta configuracion, se agrega la siguiente direccion en el navegador <strong>localhost:24312</strong>. Si el contenedor fuera apache, nginx o similar.</p></blockquote><h3 id="crear-un-contenedor-con-un-puerto-especifico"><span class="mr-2">crear un contenedor con un puerto especifico</span><a href="#crear-un-contenedor-con-un-puerto-especifico" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Los puertos que se generan en los contenedores son aleatorios y parten del puerto 32768. Pero para poder tener un mayor control en este aspecto, es posible especificar este parametro, con el siguiente comando.</p><pre><code class="language-t">docker run -d -p 8080:80 Nombre_Imagen
</code></pre><blockquote><p>Tambien es posible agregar un nombre personalizado al contenedor con <strong>–name.</strong>.</p><p>docker run -d –name Nombre_personalizado -p 8080:80 nombre_imagen</p><p>Con P(Mayuscula), docker se encargara de mapear los puertos, por lo tanto el numero será aleatorio y p(minusula) para indicar un puerto en especifico.</p></blockquote><h1 id="redes-docker">Redes Docker</h1><p>Por defecto mostrara 3 redes, previemente creadas, las cuales son;</p><ul><li><strong>Bridge</strong>: Es la red que utilizan los contenedores de manera predefinida(por defecto), a menos que se le indique lo contrario.<li><strong>Host</strong>: los conteendores en est red solo podran ver e interactuar con el host principal, y no podran interactuar entre ellos. Se utiliza para contenedores aislados y que funcionen de manera independiente.<li><strong>None</strong>: Es un contenedor que no tiene red y necesita una. Su driver es <strong>null</strong>.</ul><p>La columna <strong>SCOPE</strong>, muestra si el funcionamiento de la red es de manera local, o conectada a otros equipos.</p><h3 id="ver-lista-de-redes-en-docker"><span class="mr-2">Ver lista de redes en docker</span><a href="#ver-lista-de-redes-en-docker" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Para ver todas las redes en docker, se ocupa lo siguiente:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">network</span> <span class="nf">ls</span>
</pre></table></code></div></div><h3 id="obtener-direccion-ip-de-un-contenedor"><span class="mr-2">Obtener direccion IP de un contenedor</span><a href="#obtener-direccion-ip-de-un-contenedor" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>para obtener informacion mas especifica de los datos devueltos por inspect, se ocupa <strong>–format</strong>, y ocupa una plantilla de Golang.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">inspect</span> <span class="nf">--format='</span><span class="p">{</span> <span class="p">{</span><span class="nf">range.NetworkSettings.Networks</span><span class="p">}</span> <span class="p">}</span> <span class="p">{</span> <span class="p">{</span><span class="nf">.IPAddress</span><span class="p">}</span> <span class="p">}</span> <span class="p">{</span> <span class="p">{</span><span class="nb">end</span><span class="p">}</span> <span class="p">}</span><span class="nf">'</span> <span class="nf">ID</span><span class="nv">/Nombre_Container</span>
</pre></table></code></div></div><blockquote><p>la funcion de ping para comprobar que el contenedor este en la misma red, no se encuentra disponible wn windows ni en mac.</p></blockquote><p>Otra opcion para obtener la direccion IP, por ejemplo es.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nf">#</span> <span class="nf">Estructura</span>
<span class="nf">docker</span> <span class="nf">inspect</span> <span class="nf">Nombre</span><span class="nv">/ID_Contenedor</span> <span class="nf">|</span> <span class="nf">FindStr</span><span class="nv">/grep</span> <span class="nf">Objeto_Buscar</span>

<span class="nf">#</span> <span class="nf">windows</span>
<span class="nf">docker</span> <span class="nf">inspect</span> <span class="nf">Nombre</span><span class="nv">/ID_Contenedor</span> <span class="nf">|</span> <span class="nf">FindStr</span> <span class="nf">IPAd</span>

<span class="nf">#Linux</span>
<span class="nf">docker</span> <span class="nf">inspect</span> <span class="nf">Nombre</span><span class="nv">/ID_Contenedor</span> <span class="nf">|</span> <span class="nf">grep</span> <span class="nf">IPAd</span>
</pre></table></code></div></div><p>Para guardar la informacion de una inspeccion en un archivo seria de la siguiente manera.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">inspect</span> <span class="nf">Nombre</span><span class="nv">/ID_Contenedor</span> <span class="p">&gt;</span> <span class="nf">Nombre_Archivo.txt</span>
</pre></table></code></div></div><h3 id="obtener-informacion-detallada-de-una-red"><span class="mr-2">Obtener informacion detallada de una red</span><a href="#obtener-informacion-detallada-de-una-red" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Entrega informacion detallada de una red seleccionada, similar al obtenido con inspect para los contenedores, ademas de incluir los contenedores que estan asociadas a la red.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">network</span> <span class="nf">inspect</span> <span class="nf">Nombre_red</span>
</pre></table></code></div></div><blockquote><p>Para obtener el nombre de la red, puede coupar el comando <strong>docker network ls</strong></p><p>Mostrara los contenedores que esten conectados y en ejecucion en la red que se esta inspeccionando.</p></blockquote><h3 id="crear-nueva-red"><span class="mr-2">Crear nueva red</span><a href="#crear-nueva-red" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Para crear una red nueva en docker se ocupa.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">network</span> <span class="nf">create</span> <span class="nf">Nombre_Red</span>
</pre></table></code></div></div><blockquote><p>La red tipo bridge que uno crea posee mas caracteristicas que la que se encuentra por defecto en docker.</p><p>Si no se especifica un driver en especifico en la red que se esta creando este sera del tipo <strong>bridge</strong>. Esto se puede cambiar con <strong>–driver string</strong>.</p></blockquote><h4 id="crear-red-con-rango-subnet"><span class="mr-2">Crear red con rango subnet</span><a href="#crear-red-con-rango-subnet" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>La direccion de subnet es de ejemplo.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">network</span> <span class="nf">create</span> <span class="nf">--subnet=192.168.0.0</span><span class="nv">/16</span>
</pre></table></code></div></div><h3 id="asociar-contenedor-a-red"><span class="mr-2">Asociar contenedor a red</span><a href="#asociar-contenedor-a-red" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Para ejecutar y asociar un contenedor a una red existente se ejecuta lo siguiente:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">--name</span> <span class="nf">Nombre_Contenedor</span> <span class="nf">--network</span> <span class="nf">Nombre_Red</span> <span class="nf">Imagen_Contenedor</span>
</pre></table></code></div></div><blockquote><p>El <strong>–network</strong> es el que asocia el contenedor creado, con la red especificada.</p></blockquote><p>Para asociar un contenedor que ya esta en ejecucion se ocupa lo siguiente:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">network</span> <span class="nf">connect</span> <span class="nf">Nombre_Red</span> <span class="nf">Nombre_Contenedor</span>
</pre></table></code></div></div><blockquote><p>Un contenedor puede estar conectado a multiples redes.</p></blockquote><p>Para desconectar un contenedor de una red es:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">network</span> <span class="nf">disconnect</span> <span class="nf">Nombre_Red</span> <span class="nf">Nombre_Contenedor</span>
</pre></table></code></div></div><h3 id="enlazar-contenedor"><span class="mr-2">Enlazar contenedor</span><a href="#enlazar-contenedor" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Se puede enlazar de dos maneras.</p><ul><li><h4 id="bridgered-por-defecto"><span class="mr-2">Bridge(Red por Defecto)</span><a href="#bridgered-por-defecto" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></ul><p>Una manera de realizar el enlace es mediante <strong>–links</strong>, aunque no es recomendable, ya que perdera soporte con el tiempo. Y es recomendable cuando se usa la red por defecto.</p><h4 id="ejemplo"><span class="mr-2">Ejemplo</span><a href="#ejemplo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Primero es necesario ejecutar un nuevo contenedor con una imagen que posea entorno interactivo</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">--rm</span> <span class="nf">--name</span> <span class="nf">Nombre_contenedor</span> <span class="nf">Nombre_Imagen</span>
</pre></table></code></div></div><p>Para saber que ip, posee el contenedor linux, se ocupa el siguiente comando</p><pre><code class="language-t">[XXXX@XXX ~]# cat /etc/hosts
</code></pre><p>Para conectarlo finalmente se ocupa el siguiente comando.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">--rm</span> <span class="nf">--name</span> <span class="nf">Nombre_contenedor</span> <span class="nf">--link</span> <span class="nf">Nombre_contenedor_destino:alias_contenedor_destino</span> <span class="nf">Nombre_Imagen</span> 
</pre></table></code></div></div><blockquote><ul><li><p>El –rm no es necesario de ser el caso, ya que al terminar de utilizar el contenedor este se eliminara automaticamente. Lo mismo para -it, es opcional.</p><li><p>Los conteendores que se desean enlazar deben poseer el <strong>–name</strong>, para facilitar el proceso.</p><li><p>Cuando se desea realizar para contenedores que esten en otra red, no es necesaria esta opcion.</p><li><p>Tambien se ocupa para comprobar que el entorno esta funcionando de manera correcta.</p><li><p>Si el contenedor no se creo con –link no podra reconocer el enlace a otros contenedores mediante el nombre o el alias, solo por la direccion IP. Osea es unidireccional en este modo.</p></ul></blockquote><ul><li><h4 id="red-perzonalizada"><span class="mr-2">Red Perzonalizada</span><a href="#red-perzonalizada" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></ul><p>Para agregar un contenedor a una red personalizada se puede ocupar.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-d</span> <span class="nf">--name</span> <span class="nf">Nombre_Contenedor</span> <span class="nf">--rm</span> <span class="nf">--network</span> <span class="nf">Nombre_Red</span> <span class="nf">Nombre_imagen</span>
</pre></table></code></div></div><blockquote><p>El <strong>–rm</strong> es opcional, ayuda para no juntar contenedores detenidos.</p></blockquote><p>Para poder acceder al contenedor:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>docker exec -it Nombre_Contenedor bash
</pre></table></code></div></div><h3 id="borrar-red"><span class="mr-2">Borrar Red</span><a href="#borrar-red" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>para borrar una red ya creada se ocupa.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">network</span> <span class="nf">rm</span> <span class="nf">Nombre_Red</span>
</pre></table></code></div></div><blockquote><p>No es posible borrar una red que tenga contenedores asociados.</p></blockquote><h1 id="volumenes-en-docker">Volumenes en Docker</h1><p>Es un componente de docker importante, por varias razones que se presentan a continuacion;</p><ul><li>Una de ellas y la mas importante es que ayuda a que la informacion de los contenedores sea <strong>Persistente</strong>.<li>Permite respaldar o migrar informacion de manera facil.<li>Estos funcionan en windows y linux por igual.<li>Un volumen puede estar conectado a varios contenedores.<li>Se puede agregar informacion a un volumen, por medio de un contenedor, antes que por un usuario.<li>Los volumenes se administran mediante Docker.<li>Se pueden usar y administrar de manera remota.</ul><h2 id="crear-volumen"><span class="mr-2">Crear Volumen</span><a href="#crear-volumen" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Una forma sencilla de crear un volumen , es al momento de crear un contenedor.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">-v</span> <span class="nf">Carpeta_Volumen</span> <span class="nf">--name</span> <span class="nf">Nombre_Contenedor</span> <span class="nf">Nombre_Imagen</span> <span class="nf">bash</span>
</pre></table></code></div></div><blockquote><p>La carpeta_volumen es donde guardara la informacion en el volumen, ejemplo <strong>“/informacion”</strong>.</p><p>El lugar donde se crea, es por defecto docker/volumenes, pero puede perzonalizarse la ubicacion de ser necesario.</p></blockquote><h2 id="listar-volumen"><span class="mr-2">Listar Volumen</span><a href="#listar-volumen" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para ver la lista de volumenes creados se ocupa:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">volume</span> <span class="nf">ls</span>
</pre></table></code></div></div><blockquote><p>Se podra ver el driver y el nombre del volumen, si no se especifica este ultimo, se generara un codigo aleatorio para el nombre.</p></blockquote><h2 id="obtener-informacion-de-volumen"><span class="mr-2">Obtener informacion de volumen</span><a href="#obtener-informacion-de-volumen" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para obtener informacion relacionada al volumen deseado se ocupa lo siguiente;</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">volume</span> <span class="nf">inspect</span> <span class="nf">ID</span><span class="nv">/Nombre_Volumen</span>
</pre></table></code></div></div><blockquote><p>Se obtendra informacion, como fecha de creacion, tipo de driver, punto de montaje(direccion de carpeta que almacena los datos), el nombre, entre otros.</p></blockquote><h2 id="crear-un-directorio-compartidocarpeta"><span class="mr-2">Crear un directorio compartido(Carpeta)</span><a href="#crear-un-directorio-compartidocarpeta" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Al crear un volumen la direccion que se genera de manera automatica no es la mas “sencilla” con la que se puede trabajar ejemplo:</p><pre><code class="language-t">/var/lib/docker/volumes/XXXXXXXX000XXXXXXXXXXXX/_data
</code></pre><p>Asi que para compartir recursos(Archivos, Carpetas, Etc)entre la maquina que aloja los contenedores y los mismo contenedores, de manera sencilla es especificandolo desde el inicio al crear el contenedor, como se muestra a continuacion:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">-v</span> <span class="nf">Direccion_Maquina_Host:Direccion_Contenedor</span> <span class="nf">--name</span> <span class="nf">Nombre_Contenedor</span> <span class="nf">Nombre_Imagen</span>

<span class="nf">#Ejemplo</span>
<span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">-v</span> <span class="nv">/root/carpeta1:/carpeta1</span>
</pre></table></code></div></div><blockquote><p>Es recomendable realizarlo al momento de crear un contenedor.</p></blockquote><p><strong>Se asocia el directorio entre contenedor y la maquina que lo aloja, por lo tanto no se podria considerar un volumen esto se muestra como “HostConfig/Binds” al revisar los datos del contenedor</strong></p><h2 id="compartir-volumen-entre-contenedor"><span class="mr-2">Compartir Volumen entre contenedor</span><a href="#compartir-volumen-entre-contenedor" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>para compartir un volumen entre dos contenedores.</p><p>Primero creamos el contenedor con el volumen, el cual vamos a compartir</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">-v</span> <span class="nv">/datos</span> <span class="nf">--name</span> <span class="nf">Nombre_Contenedor</span> <span class="nf">Nombre_Imagen</span> <span class="nf">bash</span>
</pre></table></code></div></div><p>Despues creamos el segundo contenedor, el cual se conectara al volumen del conteendor creado anteriormente:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">--name</span> <span class="nf">Nombre_Contenedor</span> <span class="nf">--volumes-from</span> <span class="nf">Nombre_Contenedor1</span> <span class="nf">Nombre_Imagen</span> <span class="nf">bash</span>
</pre></table></code></div></div><blockquote><p>El <strong>contendor1</strong>, es el contenedor ya creado al cual queremos acceder a su volumen con este segundo contenedor.</p><p>Tambien es posible conectarse al ultimo contenedor creado que accedio a dicho volumen, en vez de hacerlo con el primer contenedor.</p></blockquote><p>No es posible realizar esta accion directamente al volumen, es necesario que primero se encuentre un contenedor iniciado y conectado a dicho volumen para poder realizar esta accion.</p><h2 id="crear-volumen-de-forma-independientenombre-personalizado-permiso-de-lectura-uso-windows"><span class="mr-2">Crear Volumen de forma independiente(Nombre Personalizado, permiso de lectura, uso windows)</span><a href="#crear-volumen-de-forma-independientenombre-personalizado-permiso-de-lectura-uso-windows" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="nombre-personalizado"><span class="mr-2">Nombre Personalizado</span><a href="#nombre-personalizado" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>En vez de ocupar un nombre que se genera de manera automatica, podemos ocupar uno personalizado creado por el usuario, de la siguiente manera:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">volume</span> <span class="nf">create</span> <span class="nf">Nombre_Volume</span>
</pre></table></code></div></div><p>Para asociarlo a un contenedor se ocupa como ejemplo lo siguiente:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">--name</span> <span class="nf">Nombre_Contenedor</span> <span class="nf">Nombre_Volumen:Nombre_Directorio</span> <span class="nf">Nombre_Imagen</span> <span class="nf">bash</span> 
</pre></table></code></div></div><h3 id="permiso-lectura"><span class="mr-2">Permiso Lectura</span><a href="#permiso-lectura" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Para que un contenedor no pueda realizar modificaciones en un directorio y solo realice <strong>lectura</strong>, se le agrega <code class="language-plaintext highlighter-rouge">**:ro**</code> al Nombre_Directorio.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">--name</span> <span class="nf">Nombre_Contenedor</span> <span class="nf">Nombre_Volumen:Nombre_Directorio:ro</span> <span class="nf">Nombre_Imagen</span> <span class="nf">bash</span> 
</pre></table></code></div></div><h3 id="uso-windows"><span class="mr-2">Uso windows</span><a href="#uso-windows" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Si se desea realizar lo mismo pero en windows, se ocupa de la siguiente manera:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">--name</span> <span class="nf">Nombre_Contenedor</span> <span class="nf">-v</span> <span class="nf">Nombre_Directorio:Nombre_Volumen</span> <span class="nf">Nombre_Imagen</span> <span class="nf">bash</span> 
<span class="nf">#Ejemplo</span>
<span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">--name</span> <span class="nf">ubuntu7</span> <span class="nf">-v</span> <span class="nf">C:\\Users\\XXXX\\dir1:volumenDocker</span> <span class="nf">ubuntu</span> <span class="nf">bash</span>
</pre></table></code></div></div><blockquote><p>En windows se debe ocupar la ruta completa, ademas de cambiar el <strong>”/”</strong> por <strong>”\\“</strong></p><p>Se debe tener la contraseña del equipo para que docker pueda acceder, ademas de los permisos en firewall.</p></blockquote><h2 id="borrar-volumen-especifico"><span class="mr-2">Borrar Volumen Especifico</span><a href="#borrar-volumen-especifico" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para borrar un volumen se ocupa:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>docker volume rm ID/Nombre_Volumen
</pre></table></code></div></div><blockquote><p>Para poder eliminar exitosamente el volumen no puede terner asociado o que sea dependencia de un contenedor.</p></blockquote><h2 id="borrar-volumen-inactivos-o-no-asociados"><span class="mr-2">Borrar volumen inactivos o no asociados</span><a href="#borrar-volumen-inactivos-o-no-asociados" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para eliminar volumenes que ya no esten en uso por almenos un contenedor o hayan quedado sin haber sido eliminados.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">volume</span> <span class="nf">prune</span>
</pre></table></code></div></div><blockquote><p>Mostrara un mensaje de advertencia para confirmar la accion.</p></blockquote><h1 id="manipulacion-de-imagen-y-contenedor">Manipulacion de Imagen y Contenedor</h1><h2 id="modificar-imagen"><span class="mr-2">Modificar Imagen</span><a href="#modificar-imagen" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Una de las primeras opciones a ocupar para crear una imagen es mediante la modificacione de conteendores.</p><p>Para modificar una imagen primero se tiene que crear un contenedor, a partir de la “imagen base”, por ejemplo ubuntu:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">--name</span> <span class="nf">Nombre_Contenedor</span> <span class="nf">Nombre_Imagen</span> <span class="nf">bash</span>
</pre></table></code></div></div><p>Al tener el contenedor ejecutando, posteriormente se instala los softwares requeridos/solicitados(/necesitados?), y al final al dejar el contenedor como se desea.</p><h2 id="crear-imagen"><span class="mr-2">Crear Imagen</span><a href="#crear-imagen" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para crear una imagen con un contenedor modificado se puede ahccer de manera automatica o manual, en este caso se mostrara la manera manual.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">commit</span> <span class="nf">ID</span><span class="nv">/Nombre_Contenedor</span> <span class="nf">Nombre_Nueva_Imagen:tag</span>
</pre></table></code></div></div><blockquote><p>si no se especifica el tag, agregara <strong>latest</strong> de manera automatica.</p></blockquote><h1 id="dockerfile">DockerFile</h1><p>Es un archivo de configuracion que permite construir imagenes de manera automatica.</p><p>Esta formado por un conjunto de instrucciones, que contiene para construir la imagen.</p><p>Ejemplo Hello-Word</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nf">FROM</span> <span class="nf">scratch</span>
<span class="nf">COPY</span> <span class="nf">hello</span> <span class="err">/</span>
<span class="nf">CMD</span> <span class="p">[</span><span class="nf">"</span><span class="nv">/hello"</span><span class="p">]</span>
</pre></table></code></div></div><h2 id="crear-imagen-con-dockerfile"><span class="mr-2">Crear imagen con Dockerfile</span><a href="#crear-imagen-con-dockerfile" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para empezar se crea un archivo llamado <code class="language-plaintext highlighter-rouge">Dockerfile</code>(Se respera mayusculas).</p><p>Estructura basica:</p><ul><li><strong>FROM</strong>: Carga la imagen Base/Inicial.<li><strong>RUN</strong>: Comando que se desea ejecutar.<li><hr /></ul><blockquote><p>Dockerfile no puede poseer comando interactivo.</p></blockquote><p>Ejemplo</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nf">FROM</span> <span class="nf">XXXXX</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">update</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">install</span> <span class="nf">-y</span> <span class="nf">XXXXX</span>
</pre></table></code></div></div><p>Posteriormente se ejecuta lo siguiente para crear la nueva imagen.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">build</span> <span class="nf">-t</span> <span class="nf">Nombre_Imagen:Tag</span> <span class="nf">.Directorio</span>
<span class="nf">#</span> <span class="nf">Ejemplo</span>
<span class="nf">docker</span> <span class="nf">build</span> <span class="nf">-t</span> <span class="nf">imagen_nueva</span> <span class="nf">.</span>
</pre></table></code></div></div><blockquote><p>-t es para nombrar la nueva imagen</p><p>El .Drectorio es donde puede encontrar la url donde esta el dockerfile o se desea copiar algo nuevo. Este debe estar en el directorio donde se encuentra dockerfile si solamente aparece un <strong>.(punto)</strong>. Ademas puede ser una direccion de internet.</p></blockquote><p>En caso de estar en windows y crear un contenedor de linux mostrara la siguiente advertencia.</p><p><strong>ADVERTENCIA DE SEGURIDAD: Está creando una imagen de Docker desde Windows contra un host que no sea Docker de Windows. Todos los archivos y directorios añadidos al contexto de construcción tendrán permisos ‘-rwxr-xr-x’. Se recomienda volver a comprobar y restablecer los permisos de los archivos y directorios sensibles.</strong></p><h2 id="comando-run"><span class="mr-2">Comando RUN</span><a href="#comando-run" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para ejecutar multiples comandos en una misma capa en la imagen se ocupa <code class="language-plaintext highlighter-rouge">&amp;&amp;</code>, ejemplo:</p><p>Dockerfile</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>FROM Ubuntu
RUN apt-get update
RUN apt-get install -y python
RUN echo 1.0 &gt;&gt; /etc/version &amp;&amp; apt-get install -y git \
    &amp;&amp; apt-get install -y iputils-ping
</pre></table></code></div></div><blockquote><p>Para los que no saben la <strong>\</strong> sirve para que siga ejecutando la linea siguiente.</p></blockquote><h2 id="comando-cmd"><span class="mr-2">Comando CMD</span><a href="#comando-cmd" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Permite indicar el comando por defecto del contenedor, Puede haber muchos <strong>CMD</strong> en un Dockerfile, pero el ultimo es el que cuenta, por lo tanto lo recomendable es tener <strong>UNO</strong> por Dockerfile.</p><p>En resumen sirve para iniciar un comando.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="nf">FROM</span> <span class="nf">XXXXX</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">update</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">install</span> <span class="nf">-y</span> <span class="nf">XXXXX</span>
<span class="nf">CMD</span> <span class="nf">XXXXXXXXXXXXXXXX</span>

<span class="nf">#</span> <span class="nf">Ejemplo</span>
<span class="nf">FROM</span> <span class="nf">XXXXX</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">update</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">install</span> <span class="nf">-y</span> <span class="nf">XXXXX</span>
<span class="nf">CMD</span> <span class="nf">echo</span> <span class="nf">"XXXXXXXXXXXXXX"</span>
</pre></table></code></div></div><blockquote><p>El XXXXXXXX es el texto que podriamos ingresar y podra mostrar en la terminal.</p></blockquote><p>Tambien permite colocar corchetes, para ejecutar como exec en vez de bash, en resumen formato <strong>JSON</strong>.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="nf">FROM</span> <span class="nf">XXXXX</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">update</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">install</span> <span class="nf">-y</span> <span class="nf">XXXXX</span>
<span class="nf">CMD</span> <span class="p">[</span><span class="nf">XXXXXXXXXXXXXXXX</span><span class="p">]</span>

<span class="nf">#</span> <span class="nf">Ejemplo</span>
<span class="nf">FROM</span> <span class="nf">XXXXX</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">update</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">install</span> <span class="nf">-y</span> <span class="nf">XXXXX</span>
<span class="nf">CMD</span> <span class="p">[</span><span class="nf">"echo",</span> <span class="nf">"Mensaje</span> <span class="nf">a</span> <span class="nf">Mostrar"</span><span class="p">]</span>
</pre></table></code></div></div><blockquote><p>Esta ultima manera permite ejecutar como exec, para asi evitar posibles errores al ocupar un bash. Ademas se evita el tener que depender del bash de un conteendor, ya que es seguro que se pueda ejecutar exec de docker.</p></blockquote><h2 id="entrypoint"><span class="mr-2">Entrypoint</span><a href="#entrypoint" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Es similar a CMD, ya que permite ejecutar algo cuando de inicia un contenedor, con la diferencia que el comando ejecutado con <strong>entrypoint</strong> se ejecutara siempre no es un comando “opcional”, a diferencia de CMD.</p><p>Y al igual que CMD solo se puede tener uno por Dockerfile.</p><p>En el ejemplo se mostrara el dockerfile configurado para ambos casos.</p><p>Ejemplo Dokerfile CMD</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nf">FROM</span> <span class="nf">imagen</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">update</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">install</span> <span class="nf">-y</span> <span class="nf">ALGO</span>
<span class="nf">CMD</span> <span class="p">[</span><span class="nf">"</span><span class="nv">/bin/bash"</span><span class="p">]</span>
</pre></table></code></div></div><p>Ejemplo Dokerfile Entrupoint</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nf">FROM</span> <span class="nf">imagen</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">update</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">install</span> <span class="nf">-y</span> <span class="nf">ALGO</span>
<span class="nf">ENTRYPOINT</span> <span class="p">[</span><span class="nf">"</span><span class="nv">/bin/bash"</span><span class="p">]</span>
</pre></table></code></div></div><p>Ejemplo de ejecucion dockerfile</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nf">#</span> <span class="nf">Ejemplo</span> <span class="nf">CMD</span> 
<span class="p">[</span><span class="nf">XXXX@XXX</span> <span class="nf">~</span><span class="p">]</span><span class="nf">#</span> <span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">--rm</span> <span class="nf">Nombre_Imagen</span> <span class="nf">ls</span>
<span class="nf">bin</span> <span class="nf">dev</span> <span class="nf">home</span> <span class="nf">lib64</span> <span class="nf">mnt</span> <span class="nf">proc</span> <span class="nb">run</span> <span class="nf">srv</span> <span class="nf">tmp</span> <span class="nf">sys</span> <span class="nf">etc</span>

<span class="nf">#</span> <span class="nf">Ejemplo</span> <span class="nf">ENTRYPOINT</span>
<span class="p">[</span><span class="nf">XXXX@XXX</span> <span class="nf">~</span><span class="p">]</span><span class="nf">#</span> <span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">--rm</span> <span class="nf">Nombre_Imagen</span> <span class="nf">df</span> <span class="nf">-h</span>
<span class="nv">/bin/df:</span> <span class="nv">/bin/df:</span> <span class="nf">cannot</span> <span class="nf">excute</span> <span class="nf">binary</span> <span class="nf">file</span>
</pre></table></code></div></div><blockquote><p><strong>Con el CMD es posible sustituir el comando que se ingreso.</strong></p><p>Como se explico entrypoint siempre ejecutara el comando que se le coloco.</p><p>Se recomienda ocupar el modo exec(JSON), para ejecutar comando con entrypoint.</p></blockquote><h2 id="workdir"><span class="mr-2">Workdir</span><a href="#workdir" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Este comando permite el poder determinar el directorio de trabajo para otros comandos ejemplo entripoint, run, etc.</p><p>Este comando puede estar multiples veces en un Dockerfile.</p><p>Ejemplo</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="nf">FROM</span> <span class="nf">imagen</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">update</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">install</span> <span class="nf">-y</span> <span class="nf">ALGO</span>
<span class="nf">RUN</span> <span class="nf">mkdir</span> <span class="nv">/info</span>
<span class="nf">WORKDIR</span> <span class="nv">/info</span>
<span class="nf">RUN</span> <span class="nf">touch</span> <span class="nf">archivo1.txt</span>
<span class="nf">WORKDIR</span> <span class="nv">/info2</span>
<span class="nf">RUN</span> <span class="nf">touch</span> <span class="nf">archivo2.txt</span>
<span class="nf">ENTRYPOINT</span> <span class="p">[</span><span class="nf">"</span><span class="nv">/bin/bash"</span><span class="p">]</span>
</pre></table></code></div></div><p>Al crear el contenedor he ingresar a la bash, se encontrara en el ultimo directorio creado.</p><pre><code class="language-t">[XXXX@XXX ~]# docker run -it --rm Nombre_Imagen
root@XXXXXXXXXXXX:/info2#
</code></pre><p>En resumen permite crear datos o componentes en carpetas especificas.</p><h2 id="copy-add"><span class="mr-2">COPY-ADD</span><a href="#copy-add" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="copy"><span class="mr-2">COPY</span><a href="#copy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Permite copiar archivos de la maquina host a un contenedor. Ejemplo</p><div class="language-vim highlighter-rouge"><div class="code-header"> <span data-label-text="Vim"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre>FROM imagen
RUN apt<span class="p">-</span><span class="nb">get</span> <span class="k">update</span>
RUN apt<span class="p">-</span><span class="nb">get</span> install <span class="p">-</span><span class="k">y</span> ALGO

##WORKDIR##
RUN <span class="nb">mkdir</span> /info
WORKDIR /info
RUN touch archivo1<span class="p">.</span>txt
WORKDIR /info2
RUN touch archivo2<span class="p">.</span>txt

##COPY##
COPY <span class="nb">index</span><span class="p">.</span>html <span class="p">.</span>
COPY app<span class="p">.</span><span class="nb">log</span> /info

##ENTRYPOINT##
ENTRYPOINT <span class="p">[</span><span class="s2">"/bin/bash"</span><span class="p">]</span>
</pre></table></code></div></div><blockquote><p>el punto(.) en COPY hace referencia al ultimo directorio creado</p><p>El primer COPY copia el archivo index.html en /info2 a eso se refiere el punto(.).</p><p>El segundo COPY, copia el archivo app.log en la carpeta /info</p><p>Copy acepta metacaracteres.</p></blockquote><h3 id="add"><span class="mr-2">ADD</span><a href="#add" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>copia o lleva ficheros o carpetas al contenedor. similar a COPY</p><div class="language-vim highlighter-rouge"><div class="code-header"> <span data-label-text="Vim"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre>FROM imagen
RUN apt<span class="p">-</span><span class="nb">get</span> <span class="k">update</span>
RUN apt<span class="p">-</span><span class="nb">get</span> install <span class="p">-</span><span class="k">y</span> ALGO

##WORKDIR##
RUN <span class="nb">mkdir</span> /info
WORKDIR /info
RUN touch archivo1<span class="p">.</span>txt
WORKDIR /info2
RUN touch archivo2<span class="p">.</span>txt

##COPY##
COPY <span class="nb">index</span><span class="p">.</span>html <span class="p">.</span>
COPY app<span class="p">.</span><span class="nb">log</span> /info

##ADD##
ADD docs docs
ADD <span class="k">a</span>* <span class="sr">/info/</span>
ADD <span class="k">f</span><span class="p">.</span>tar <span class="p">.</span>

##ENTRYPOINT##
ENTRYPOINT <span class="p">[</span><span class="s2">"/bin/bash"</span><span class="p">]</span>
</pre></table></code></div></div><blockquote><p>En el primer ADD cuando se coloca una ruta como docs es relacionada al ultimo workdir ejecutado(info2), en resumen si la carptea docs no se encuentra en la carpeta info2, creara dicha carpeta(/info2/docs) y copiara su contenido.</p><p>En el segundo ADD agrega todos los archivos que empiecen con “a” a la carpeta designada en resumen acepta metacaracteres(a*)</p><p>ADD a diferencia de COPY puede copiar el contenido de el archivo comprimido f.tar al directorio especificado.</p><p>ADD tambien tiene la opcion de traer cosas desde una URL, ejemplo archivos.</p></blockquote><h2 id="env"><span class="mr-2">ENV</span><a href="#env" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Es posible utilizar variables con ENV, a demas la manera mas simple de ocupar variables es al momento de crear un contenedor.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="nf">#</span> <span class="nf">Opcion</span> <span class="mf">1</span>
<span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">--rm</span> <span class="nf">-v</span> <span class="p">[</span><span class="nf">Argumento</span><span class="p">]</span> <span class="nf">Nombre_Imagen</span>
<span class="nf">#</span> <span class="nf">Opcion</span> <span class="mf">2</span>
<span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">--rm</span> <span class="nf">--env</span> <span class="p">[</span><span class="nf">Argumento</span><span class="p">]</span> <span class="nf">Nombre_Imagen</span>

<span class="nf">#</span> <span class="nf">Ejemplo</span> <span class="mf">1</span>
<span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">--rm</span> <span class="nf">--env</span> <span class="nf">x=10</span> <span class="nf">Nombre_Imagen</span>
<span class="nf">#</span> <span class="nf">Ejemplo</span> <span class="mf">2</span>
<span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">--rm</span> <span class="nf">--env</span> <span class="nf">x=`pwd`</span> <span class="nf">Nombre_Imagen</span>
</pre></table></code></div></div><blockquote><p>Es posible pasar comandos.</p></blockquote><p>Ejemplo Ejecucion</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="p">[</span><span class="nf">XXXX@XXX</span> <span class="nf">~</span><span class="p">]</span><span class="nf">#</span> <span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-it</span> <span class="nf">--rm</span> <span class="nf">-e</span> <span class="nf">x=`pwd`</span> <span class="nf">Nombre_Imagen</span>
<span class="nf">root@XXXXXXXXXXXX:</span><span class="nv">/info2#echo</span> <span class="nf">$x</span>
<span class="nv">/root/XXXXXXX</span>
</pre></table></code></div></div><blockquote><p>XXXXXX Nombre carpeta aloja proyecto</p></blockquote><p>En un archivo Dockerfile se podria hacer de la siguiente manera.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="nf">FROM</span> <span class="nf">ubuntu</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">update</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">install</span> <span class="nf">-y</span> <span class="nf">python</span>
<span class="nf">RUN</span> <span class="nf">echo</span> <span class="mf">1.0</span> <span class="p">&gt;&gt;</span> <span class="nv">/etc/version</span> <span class="nf">&amp;&amp;</span> <span class="nf">apt-get</span> <span class="nf">install</span> <span class="nf">-y</span> <span class="nf">git</span> <span class="nf">\</span>
    <span class="nf">&amp;&amp;</span> <span class="nf">apt-get</span> <span class="nf">install</span> <span class="nf">-y</span> <span class="nf">iputils-ping</span>

<span class="nf">##WORKDIR##</span>
<span class="nf">RUN</span> <span class="nf">mkdir</span> <span class="nv">/info</span>
<span class="nf">WORKDIR</span> <span class="nv">/info</span>
<span class="nf">RUN</span> <span class="nf">touch</span> <span class="nf">archivo1.txt</span>
<span class="nf">WORKDIR</span> <span class="nv">/info2</span>
<span class="nf">RUN</span> <span class="nf">touch</span> <span class="nf">archivo2.txt</span>

<span class="nf">##COPY##</span>
<span class="nf">COPY</span> <span class="nf">index.html</span> <span class="nf">.</span> 
<span class="nf">COPY</span> <span class="nf">app.log</span> <span class="nv">/info</span>

<span class="nf">##ADD##</span>
<span class="nf">ADD</span> <span class="nf">docs</span> <span class="nf">docs</span>
<span class="nf">ADD</span> <span class="nf">a*</span> <span class="nv">/info</span><span class="err">/</span>
<span class="nf">ADD</span> <span class="nf">f.tar</span> <span class="nf">.</span>

<span class="nf">##ENV##</span>
<span class="nf">ENV</span> <span class="nf">dir=</span><span class="nv">/datos</span> <span class="nf">dir1=</span><span class="nv">/datos1</span>
<span class="nf">RUN</span> <span class="nf">mkdir</span> <span class="nf">$dir</span> <span class="nf">&amp;&amp;</span> <span class="nf">mkdir</span> <span class="nf">$dir1</span>

<span class="nf">##ENTRYPOINT##</span>
<span class="nf">ENTRYPOINT</span> <span class="p">[</span><span class="nf">"</span><span class="nv">/bin/bash"</span><span class="p">]</span>
</pre></table></code></div></div><blockquote><p>Al revisar se podra ver las carpetas creadas y agregadas al registro env, del contenedor.</p></blockquote><h2 id="arg"><span class="mr-2">ARG</span><a href="#arg" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Permite poner variables, es similar a env, pero arg permite recibir variables al momento de construir algo.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre><td class="rouge-code"><pre><span class="nf">FROM</span> <span class="nf">ubuntu</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">update</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">install</span> <span class="nf">-y</span> <span class="nf">python</span>
<span class="nf">RUN</span> <span class="nf">echo</span> <span class="mf">1.0</span> <span class="p">&gt;&gt;</span> <span class="nv">/etc/version</span> <span class="nf">&amp;&amp;</span> <span class="nf">apt-get</span> <span class="nf">install</span> <span class="nf">-y</span> <span class="nf">git</span> <span class="nf">\</span>
    <span class="nf">&amp;&amp;</span> <span class="nf">apt-get</span> <span class="nf">install</span> <span class="nf">-y</span> <span class="nf">iputils-ping</span>

<span class="nf">##WORKDIR##</span>
<span class="nf">RUN</span> <span class="nf">mkdir</span> <span class="nv">/info</span>
<span class="nf">WORKDIR</span> <span class="nv">/info</span>
<span class="nf">RUN</span> <span class="nf">touch</span> <span class="nf">archivo1.txt</span>
<span class="nf">WORKDIR</span> <span class="nv">/info2</span>
<span class="nf">RUN</span> <span class="nf">touch</span> <span class="nf">archivo2.txt</span>

<span class="nf">##COPY##</span>
<span class="nf">COPY</span> <span class="nf">index.html</span> <span class="nf">.</span> 
<span class="nf">COPY</span> <span class="nf">app.log</span> <span class="nv">/info</span>

<span class="nf">##ADD##</span>
<span class="nf">ADD</span> <span class="nf">docs</span> <span class="nf">docs</span>
<span class="nf">ADD</span> <span class="nf">a*</span> <span class="nv">/info</span><span class="err">/</span>
<span class="nf">ADD</span> <span class="nf">f.tar</span> <span class="nf">.</span>

<span class="nf">##ENV##</span>
<span class="nf">ENV</span> <span class="nf">dir=</span><span class="nv">/datos</span> <span class="nf">dir1=</span><span class="nv">/datos1</span>
<span class="nf">RUN</span> <span class="nf">mkdir</span> <span class="nf">$dir</span> <span class="nf">&amp;&amp;</span> <span class="nf">mkdir</span> <span class="nf">$dir1</span>

<span class="nf">##ARG##</span>
<span class="nf">ARG</span> <span class="nf">dir2</span>
<span class="nf">RUN</span> <span class="nf">mkdir</span> <span class="nf">$dir2</span>

<span class="nf">##ENTRYPOINT##</span>
<span class="nf">ENTRYPOINT</span> <span class="p">[</span><span class="nf">"</span><span class="nv">/bin/bash"</span><span class="p">]</span>
</pre></table></code></div></div><blockquote><p>dir2 da un error al no tener un valor</p></blockquote><p>Para solucionar el error generado por falta de informacion en dir2, se agrega dicha informacion faltante al momento de construir la imagen.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">build</span> <span class="nf">-t</span> <span class="nf">Nombre_Imagen</span> <span class="nf">--build-arg</span> <span class="nf">dir2=</span><span class="nv">/datos2</span> <span class="nf">.</span>
</pre></table></code></div></div><p>Con esto no va a generar error</p><blockquote><p>es posible pasar mas de una variable. Cada variable debe incluir el –build-arg</p></blockquote><h2 id="expose"><span class="mr-2">EXPOSE</span><a href="#expose" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Permite exponer puertos, se le indica que un puerto en especifico es publico al crear una imagen.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nf">##EXPOSE##</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">install</span> <span class="nf">-y</span> <span class="nf">apache2</span>
<span class="nf">EXPOSE</span> <span class="mf">80</span>
</pre></table></code></div></div><blockquote><p>Esto instala apache y le asigna el puerto 80.</p><p>De igual manera al crear el contenedor se debe asignar el puerto ejemplo, <code class="language-plaintext highlighter-rouge">-p 8080:80</code>.</p></blockquote><h2 id="volume"><span class="mr-2">VOLUME</span><a href="#volume" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Permite crear volumenes de manera automatica a traves del dockerfile.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="nf">##EXPOSE##</span>
<span class="nf">RUN</span> <span class="nf">apt-get</span> <span class="nf">install</span> <span class="nf">-y</span> <span class="nf">apache2</span>
<span class="nf">EXPOSE</span> <span class="mf">80</span>
<span class="nf">ADD</span> <span class="nf">entrypoint.sh</span> <span class="nv">/info2</span>

<span class="nf">##VOLUME##</span>
<span class="nf">ADD</span> <span class="nf">paginas</span> <span class="nv">/var/www/html</span>
<span class="nf">VOLUME</span> <span class="p">[</span><span class="nf">"</span><span class="nv">/var/www/html"</span><span class="p">]</span>

<span class="nf">##CMD##</span>
<span class="nf">CMD</span> <span class="nv">/info2/entrypoint.sh</span>
</pre></table></code></div></div><blockquote><p>Comparte la misma direccion el volumen y el contenedor.</p><p>Recordar que los volumenes son externos al contenedor</p></blockquote><h1 id="docker-hub">Docker Hub</h1><p>Es un repositorio de images donde encuentras imagenes creadas por empresas(repositorios oficiales) y otras creadas por usuarios.</p><h2 id="subir-imagen-a-docker-hub"><span class="mr-2">Subir imagen a Docker HUB</span><a href="#subir-imagen-a-docker-hub" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para poder subir la imagen primero se agrega la cuanta con el siguiente comando.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">login</span>
</pre></table></code></div></div><p>Pedira la cuenta de usuario y su contraseña respectiva. Al logearse correctamente aparecera <code class="language-plaintext highlighter-rouge">Login Succeeded</code>, y va a durar mientras este el terminal abierto o la coneccion funcionando.</p><p>Para subir imagen se ocupa <code class="language-plaintext highlighter-rouge">docker push</code>. Docker hub solicita un nombre “especial”, para el repositorio al no ser una imagen oficial(ubuntu), por lo cual nuestra imagen seria.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">image</span> <span class="nf">tag</span> <span class="nf">Nombre_imagen:TAG</span> <span class="nf">NombreUsuario</span><span class="nv">/Nombreimagen:tag</span>
</pre></table></code></div></div><p>con esto se cambia el nombre a uno adecuado para docker hub. ejemplo</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">image</span> <span class="nf">XXXX:1</span> <span class="nf">usuariodocker</span><span class="nv">/XXXX:1</span>
</pre></table></code></div></div><p>Posteriormente, se realiza el <code class="language-plaintext highlighter-rouge">docker push</code></p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">push</span> <span class="nf">usuarioDocker</span><span class="nv">/Nombre_Imagen:TAG</span>
</pre></table></code></div></div><h1 id="docker-compose">Docker Compose</h1><p>Es un servicio que “orquesta” servicios o componentes, mediante un archivo llamado <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> que contiene instrucciones para crear los enlaces entre contenedores que contengan servicios(Base de datos, BackEnd, FrontEnd, etc.).</p><p>En resumen, permite gestionar/simplificar una arquitectura de manera sencilla, ejemplo el Stack MEAN (MongoDB, Express, Angular, Nodejs).</p><h2 id="instalar-docker-compose"><span class="mr-2">Instalar Docker Compose</span><a href="#instalar-docker-compose" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Docker Compose ya esta instalado en windows, al instalar docker, para mac y linux se realiza manualmente, para mas detalles ver documentacion.</p><h2 id="docker-compose---comandos"><span class="mr-2">Docker-compose - Comandos</span><a href="#docker-compose---comandos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="docker-compose-up"><span class="mr-2">docker-compose up</span><a href="#docker-compose-up" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Sirve para iniciar compose, con la configuracion del archivo <code class="language-plaintext highlighter-rouge">docker-compose.yml</code></p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker-compose</span> <span class="nf">up</span>
</pre></table></code></div></div><h3 id="docker-compose-ps"><span class="mr-2">docker-compose ps</span><a href="#docker-compose-ps" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Entrega informacion similar a <code class="language-plaintext highlighter-rouge">docker ps</code>, muestra los contenedores que conforman un servicio y su estado</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker-compose</span> <span class="nf">ps</span>
</pre></table></code></div></div><h3 id="docker-compose-images"><span class="mr-2">docker-compose images</span><a href="#docker-compose-images" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Permite ver las imagenes que se utilizan para los contenedores.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker-compose</span> <span class="nf">images</span>
</pre></table></code></div></div><h3 id="docker-compose-config"><span class="mr-2">docker-compose config</span><a href="#docker-compose-config" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Permite saber si el archivo <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> es correcto.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nf">#</span> <span class="nf">Muestra</span> <span class="nf">la</span> <span class="nf">informacion</span> <span class="nf">contenido</span> <span class="nf">dentro</span> <span class="nf">del</span> <span class="nf">archivo.</span>
<span class="nf">docker-compose</span> <span class="nf">config</span>

<span class="nf">#</span> <span class="nf">Muestra</span> <span class="nf">solo</span> <span class="nf">los</span> <span class="nf">errores.</span>
<span class="nf">docker-compose</span> <span class="nf">config</span> <span class="nf">-q</span>

<span class="nf">#Muestra</span> <span class="nf">los</span> <span class="nf">servicios</span> <span class="nf">del</span> <span class="nf">archivo.</span>
<span class="nf">docker-compose</span> <span class="nf">config</span> <span class="nf">--service</span>
</pre></table></code></div></div><blockquote><p>Para ejecutarlo de manera correcta se debe estar en la carpeta donde se encuentra dicho archivo.</p></blockquote><h3 id="docker-compose-start"><span class="mr-2">docker-compose start</span><a href="#docker-compose-start" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Permite iniciar los contenedores que componen un servicio.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker-compose</span> <span class="nf">start</span>
</pre></table></code></div></div><h3 id="docker-compose-logs"><span class="mr-2">docker-compose logs</span><a href="#docker-compose-logs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Permite ver los logs(registros de sucesos que hizo el servicio incluye notas, warning, errores, etc.) de un servicio en especifico.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker-compose</span> <span class="nf">logs</span> <span class="nf">Nombre_Servicio</span>
</pre></table></code></div></div><h3 id="docker-compose-top"><span class="mr-2">docker-compose top</span><a href="#docker-compose-top" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Muestra los procesos mas pesados de un servicio.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker-compose</span> <span class="nf">top</span> <span class="nf">Nombre_Servicio</span>
</pre></table></code></div></div><h3 id="docker-compose-pause"><span class="mr-2">docker-compose pause</span><a href="#docker-compose-pause" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Se puede pausar de manera temporal, los contenedores y servicios que se esten ejecutando en docker.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker-compose</span> <span class="nf">pause</span>
</pre></table></code></div></div><p>Para volver a activarlos, se ocupa.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker-compose</span> <span class="nf">unpause</span>
</pre></table></code></div></div><h3 id="docker-compose-restart"><span class="mr-2">docker-compose restart</span><a href="#docker-compose-restart" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>reinicia los servicios.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker-compose</span> <span class="nf">restart</span>
</pre></table></code></div></div><blockquote><p>Se debe ejecutar con cuidado ya que es posible que pierda, servicios.</p></blockquote><h3 id="docker-compose-stop"><span class="mr-2">docker-compose stop</span><a href="#docker-compose-stop" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Para detener los servicios que actualmente se ejecutan en compose.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker-compose</span> <span class="nf">stop</span>
</pre></table></code></div></div><h3 id="docker-compose-rm"><span class="mr-2">docker-compose rm</span><a href="#docker-compose-rm" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Sirve para eliminar servicios que se esten ejecutando en compose.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker-compose</span> <span class="nf">rm</span>
</pre></table></code></div></div><h3 id="docker-compose-down"><span class="mr-2">docker-compose down</span><a href="#docker-compose-down" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Detiene los servicios, ademas borra los servicios, contenedores, redes. Para eliminar los volumenes asociados al servicio que se estaba ejecutando, se ocupa <code class="language-plaintext highlighter-rouge">docker volume prune</code>.</p><h2 id="estructura-fichero-docker-compose"><span class="mr-2">Estructura fichero Docker-Compose</span><a href="#estructura-fichero-docker-compose" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>El fichero <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> consta de una estructura que similar a la siguiente.</p><ul><li><strong>Servicio:</strong> Es para especificar la version de docker donde se lanzara docker-compose.<li><strong>Services:</strong> Se colocan todos los servicios que contendra compose, con un nombre que pueda ser identificable. Todos los servicios que se agregen al <code class="language-plaintext highlighter-rouge">docker-compose</code> deben tener el comando ‘build’ o ‘images’</ul><p>Ejemplo</p><pre><code class="language-txt">version: '3'
services:
      web:
         build: .
         ports:
         - "5000:5000"
         volumes:
         - .:/code
         - logvolume01:/var/log
         links:
         - redis
      redis:
          image: redis
volumes:
  logvolume01: {}
</code></pre><blockquote><p>El punto en <strong>build</strong> es la ubicacion del dockerfile, en este caso se encuentra en la misma carpeta que el docker-compose.</p><p><strong>Link</strong> al igual que en los contenedores es para unirlo a una red especifica.</p></blockquote><h2 id="construir-docker-composeconstruir-servicios"><span class="mr-2">Construir Docker-Compose(Construir servicios)</span><a href="#construir-docker-composeconstruir-servicios" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Primero se crea el archivo <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> con las instrucciones. Ejemplo</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>version:'3'
services:
  nginx:
  image: nginx:stable-alpine
  ports:
  - "80:80"
</pre></table></code></div></div><p>Despues se construye con el comando</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nf">#</span> <span class="nf">Construir</span> <span class="nf">servicios</span>
<span class="nf">docker-compose</span> <span class="nf">up</span>
<span class="nf">#</span> <span class="nf">Modo</span> <span class="nf">Background</span>
<span class="nf">docker-compose</span> <span class="nf">up</span> <span class="nf">-d</span>
</pre></table></code></div></div><blockquote><p>Se recomienda ejecutarlo en modo background con el comando <code class="language-plaintext highlighter-rouge">-d</code> Docker Compose va a crear una red nueva por defecto si no se le especifica.</p></blockquote><h2 id="listar-micro-servicios"><span class="mr-2">Listar micro servicios</span><a href="#listar-micro-servicios" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Al igual que con los contenedores uno puede listar los micro servicios de docker-compose, con el siguiente comando.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker-compose</span> <span class="nf">ps</span>
</pre></table></code></div></div><h2 id="enlazar-contenedores-servicios-puertos-y-variables"><span class="mr-2">Enlazar contenedores, servicios, puertos y variables.</span><a href="#enlazar-contenedores-servicios-puertos-y-variables" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Se creara un micro servicio, mas completo.</p><p>Ejemplo</p><div class="language-docker highlighter-rouge"><div class="code-header"> <span data-label-text="Docker"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre>version: '3'
services:
  wordpress:
    image: wordpress
    environment:
      WORDPRESS_DB_HOST: dbserver:2222
      WORDPRESS_DB_PASSWORD: 123456
    ports:
      - 8080:80
      depends_on:
      - dbserver
  dbserver:
    image: mariadb:latest
    environment:
      MYSQL_ROOT_PASSWORD: 123456
    ports:
      - 2222:2222
</pre></table></code></div></div><blockquote><p>dbserver en <strong><code class="language-plaintext highlighter-rouge">WORDPRESS_DB_HOST</code></strong> es el nombre del servicio de la base de datos mariadb, configurada mas abajo.</p><p>Con <strong><code class="language-plaintext highlighter-rouge">depends_on</code></strong> se le indica como se inician los contenedores, en este caso wordpress tiene una dependencia de <strong>dbserver</strong>, por lo cual este ultimo inicia primero.</p><p>Docker construira una red personalizada para los contenedores sin necesidad de indicarlo, esto sucede en las ultimas versiones de docker. En caso contrario se tendra que ocupar el <strong><code class="language-plaintext highlighter-rouge">--link</code></strong>.</p></blockquote><p>Estructura:</p><ul><li><strong>Servicios:</strong> Son los contenedores que se crean, basados en las especificaciones que se entregan.<ul><li><strong>wordpress</strong><li><strong>dbserver</strong></ul><li><strong>Puertos:</strong> Puntos de coneccion, salida y entrada de datos de los contenedores.<ul><li><strong>wordpress</strong> - puerto 80 (dependen del servicio dbserver)<li><strong>dbserver</strong> - puerto 3306</ul><li><strong>Enviroment:</strong> Son las variables que se le pueden entregar a las imagenes al momento de generar el contenedor.</ul><p>Comando para ejecutar el archivo de <code class="language-plaintext highlighter-rouge">docker-compose.yml</code></p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker-compose</span> <span class="nf">up</span>
</pre></table></code></div></div><p>Posteriormente acceder a <code class="language-plaintext highlighter-rouge">localhost:8080</code></p><h2 id="volumenes-en-docker-compose"><span class="mr-2">Volumenes en Docker Compose</span><a href="#volumenes-en-docker-compose" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Los volumenes en docker-compose, funcionan igual que en docker normal. La unica diferencia son los comandos y la manera en la que se manejan.</p><p>Ejemplo:</p><div class="language-vim highlighter-rouge"><div class="code-header"> <span data-label-text="Vim"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="k">version</span><span class="p">:</span> <span class="s2">"3.2"</span>
services<span class="p">:</span>
  web<span class="p">:</span>
    image<span class="p">:</span> nginx<span class="p">:</span>alpine
    volumes<span class="p">:</span>
      <span class="p">-</span> <span class="nb">type</span><span class="p">:</span> volume
        <span class="k">source</span><span class="p">:</span> mydata
        target<span class="p">:</span> /data
        volume<span class="p">:</span>
          nocopy<span class="p">:</span> true
      <span class="p">-</span> <span class="nb">type</span><span class="p">:</span> bind
        <span class="k">source</span><span class="p">:</span> <span class="p">.</span>/static
        target<span class="p">:</span> <span class="sr">/opt/</span>app/static
    ports<span class="p">:</span>
      <span class="p">-</span> <span class="m">80</span><span class="p">:</span><span class="m">80</span>
  db<span class="p">:</span>
    image<span class="p">:</span> postgres<span class="p">:</span>latest
    volumes<span class="p">:</span>
      <span class="p">-</span> <span class="s2">"/var/run/postgres/postgres.sock:/var/run/postgres/postgres.sock"</span>
      <span class="p">-</span> <span class="s2">"dbdata:/var/lib/postgresql/data"</span>
volumes<span class="p">:</span>
  mydata<span class="p">:</span>
  dbdata<span class="p">:</span>
</pre></table></code></div></div><blockquote><p>volumen de nombre <strong>mydata</strong> esta asociado a la carpeta del volumen <strong>/data</strong>.</p><p>volumen de tipo bind <strong>./static</strong> (el punto es donde esta docker-compose donde tendra una carpeta llamada static) es una carpeta en el equipo principal que estara escaneada que esta asociado/compartido con el directorio <strong>/opt/app/static</strong> que esta dentro del contenedor. Este es directorio completo. En resumen, el contenido de las dos carpetas es identico.</p><p>En la primera opcion se mapea el socket del equipo que aloja docker con el socket del contenedor</p><p>En el segundo dbdata(del equipo principal) esta mapeado con <strong>/var/lib/postgresql/data</strong> del contenedor. Este ultimo es nombre de volumen.</p></blockquote><p>Para acceder al servicio web se puede ocupar.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker-compose</span> <span class="nb">exec</span> <span class="nf">web</span> <span class="nf">sh</span>
</pre></table></code></div></div><p>Estructura:</p><ul><li><strong>volumes:</strong> es la seccion de <code class="language-plaintext highlighter-rouge">docker-compose</code> donde se entregan las instrucciones para la crecion de los volumenes en un servicio.<li><strong>type:</strong> Es donde se indica si es de typo <strong>volume</strong> o de tipo <strong>bind</strong>, la diferencia es que con volumen se crea un volumen especifico, en una ubicacion por defecto(<strong>/var/…</strong>) y el <strong>bind</strong> asocia una determinada carpeta del contenedor con una carpeta del equipo principal(host o maquina que aloja docker).<li><strong>volume:</strong> es donde se pueden colocar algunas opciones en este caso <strong>nocopy:true</strong>, el cual permitira que el contenedor no sea copiado.<li><strong>Volumes:</strong> Se declaran los volumenes que se han creado para confirmar cuales son los volumenes.</ul><h2 id="redes-en-docker-compose"><span class="mr-2">Redes en Docker Compose</span><a href="#redes-en-docker-compose" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Creacion y configuracion de un stack con docker-compose, mostrando algunas opciones disponibles en la seccion de red.</p><p>Ejemplo</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="nf">version:</span> <span class="nf">'3.3'</span>

<span class="nf">services:</span>
  <span class="nf">app:</span>
    <span class="nf">image:</span> <span class="nf">client</span>
    <span class="nf">container_name:</span> <span class="nf">client</span>
    <span class="nf">build:</span> <span class="nf">.</span>
    <span class="nf">ports:</span> 
      <span class="nf">-</span> <span class="nf">80:3000</span>
    <span class="nf">environment:</span>
      <span class="nf">-</span> <span class="nf">MONGO_URI=mongodb:</span><span class="err">/</span><span class="nv">/mongo_db/sample</span>
    <span class="nf">depends_on:</span> 
      <span class="nf">-</span> <span class="nf">db</span>
    <span class="nf">networks:</span> 
      <span class="nf">-</span> <span class="nf">net3</span>
  <span class="nf">db:</span>
    <span class="nf">image:</span> <span class="nf">mongo:3.0.15</span>
    <span class="nf">container_name:</span> <span class="nf">mongo_db</span>
    <span class="nf">volumes:</span>
      <span class="nf">-</span> <span class="nf">.</span><span class="nv">/db:/data/db</span>
    <span class="nf">networks:</span>
      <span class="nf">net3:</span>
        <span class="nf">aliases:</span>
          <span class="nf">-</span> <span class="nf">"mongo_db"</span>
          <span class="nf">-</span> <span class="nf">"mongo_server"</span>
        <span class="nf">ipv4_address:</span> <span class="nf">172.16.238.10</span>
        <span class="nf">ipv6_address:</span> <span class="nf">2001:3984:3989::10</span>
<span class="nf">networks:</span>
  <span class="nf">net3:</span>
    <span class="nf">driver:</span> <span class="nf">bridge</span>
    <span class="nf">ipam:</span>
      <span class="nf">driver:</span> <span class="nf">default</span>
      <span class="nf">config:</span>
      <span class="nf">-</span>
        <span class="nf">subnet:</span> <span class="nf">172.16.238.0</span><span class="nv">/24</span>
      <span class="nf">-</span>
        <span class="nf">subnet:</span> <span class="nf">2001:3984:3989::</span><span class="nv">/64</span>
</pre></table></code></div></div><p>Estructura:</p><ul><li>Servicio APP:<ul><li><strong>Image:</strong> nombre de la imagen que se va a crear.<li><strong>Container_image:</strong> Nombre del contenedor<li><strong>Build:</strong> es para especificar que construya la imagen, a partir del dockerfile que se encuentra en la misma carpeta(por eso el punto).<li><strong>Ports:</strong> los puetos de acceso, en este caso el puerto 80 del host, se conecta al puerto 3000 del contenedor.<li><strong>Environment:</strong> es una variable de entorno que solicita la imagen, en este caso MONGO_URI, que apunta a la base de datos, en este caso la direccion proviene del nombre del contenedor de la base de datos.<li><strong>Depends_on:</strong> son dependencias o requisitos previos para la ejecucion del contenedor en este caso que la base de datos se ejecute primero.<li><strong>Networks:</strong> Se indica que red se va a ocupar, que va a ser propia y no generada de manera automatica. Su configuracion va a ser por defecto</ul><li>Servicio DB:<ul><li><strong>Volumes:</strong> se crea un volumen mapeado <code class="language-plaintext highlighter-rouge">./db</code>:<code class="language-plaintext highlighter-rouge">/data/db</code><li><strong>Networks:</strong> el net3 no llevara guion, ya que llevara una mayor configuracion. ya que llevara propiedades especificas.<li><strong>Aliases:</strong> Es un nombre alternativo para el servicio dentro de la red, es el nombre con el que se va a reconocer el servicio dentro de la red.<li><strong>ipv4_address/ipv6_address:</strong> Ip fija para el servicio.</ul><li>Networks: Configuracion de la red que se va a ocupar.<ul><li><strong>net3:</strong> es el nombre de la red.<li><strong>driver:</strong> bridge(predefinido), none.<li><strong>enable_ipv6:</strong> es para habilitar la opcion de ipv6 en una version anterior a 3.3 de docker compose, si se cumple una version posterior a 3.3, esta la opcion de eliminar.<li><strong>ipam:</strong> sirve para configurar una subred de ipv4/ipv6. Si se ocupan ip fijas en los servicios es obligatorio el ipam para poder configurar y que funcionen las redes a ocupar.<ul><li><strong>driver:</strong> el driver de la subred, en este caso la opcion es default.<li><strong>config:</strong> contiene las ip de la subnet de la red, de la ipv4 y ipv6.</ul></ul></ul><h2 id="cambiar-nombre-de-archivo-y-proyecto-de-docker-compose"><span class="mr-2">Cambiar Nombre de Archivo y Proyecto de docker-compose</span><a href="#cambiar-nombre-de-archivo-y-proyecto-de-docker-compose" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="ocupar-fichero-docker-compose-con-otro-nombre"><span class="mr-2">Ocupar fichero docker-compose con otro nombre</span><a href="#ocupar-fichero-docker-compose-con-otro-nombre" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Para personalizar el nombre de docker compose basta con renombrar el archivo y ejecutar el siguiente comando:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker-compose</span> <span class="nf">-f</span> <span class="nf">Nuevo_Nombre_Archivo.yml</span>
</pre></table></code></div></div><h3 id="cambiar-nombre-proyecto"><span class="mr-2">Cambiar nombre Proyecto</span><a href="#cambiar-nombre-proyecto" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Al ejecutar docker-compose siempre ocupara el nombre del la carpeta que contiene los archivos, en caso de querer cambiarlos se puede ocupar lo siguiente</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker-compose</span> <span class="nf">-p</span> <span class="nf">Nombre_Proyecto</span>
</pre></table></code></div></div><h3 id="ejecutar-de-manera-correcta-nuevo-docker-compose"><span class="mr-2">Ejecutar de manera correcta nuevo docker-compose</span><a href="#ejecutar-de-manera-correcta-nuevo-docker-compose" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Para ejecutar docker-compose con las nuevas opciones mostradas anteriormente, se ejecuta de la siguiente manera.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker-compose</span> <span class="nf">-f</span> <span class="nf">Nuevo_Nombre_Archivo.yml</span> <span class="nf">-p</span> <span class="nf">Nombre_Proyecto</span> <span class="nf">up</span>
</pre></table></code></div></div><blockquote><p>agregar -d si se desea ejecutarlo en modo background</p></blockquote><h3 id="ver-lista-con-nuevo-nombre-de-proyecto"><span class="mr-2">Ver lista con nuevo nombre de proyecto</span><a href="#ver-lista-con-nuevo-nombre-de-proyecto" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Al momento de ejecutar <code class="language-plaintext highlighter-rouge">docker-compose ps</code>, no deberia mostrar nada si se ocupo el <code class="language-plaintext highlighter-rouge">-p</code>, ya que buscara los servicios que contengan el nombre de la carpeta, que contiene el archivo. para poder ver estos servicios con nombre personalizado se ejecuta de la siguiente manera.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker-compose</span> <span class="nf">-p</span> <span class="nf">Nombre_Proyecto</span> <span class="nf">ps</span>
</pre></table></code></div></div><p>este cambio se aplicara a la mayoria de los comandos de docker-compose, por lo tanto se le debe agregar <code class="language-plaintext highlighter-rouge">-p Nombre_proyecto</code> para poder ejecutar de manera correcta, dichos comandos. Si no se realiza de esta manera, volvera a bsucar con el nombre de la carpeta contenedora del archivo.</p><h1 id="docker-registry">Docker Registry</h1><p>Es una “alternativa” a hub.docker.com, el cual permite crear nuestro propio repositorio de imagenes <strong>privado</strong>, esto permite la posibilidad de poder usarse a nivel de empresas, en su propia red privada.</p><p>Por lo tanto permite crear multiples registros, el cual cada uno sera un “hub” privado. Ademas cada uno de los registros puede almacenar imagenes diferentes dependiendo de las necesidades.</p><h2 id="crear-registro-de-imagenes"><span class="mr-2">Crear registro de imagenes</span><a href="#crear-registro-de-imagenes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para crear un registro es necesario descargar la imagen <code class="language-plaintext highlighter-rouge">Registry</code> de docker hub, y ejecutar un contenedor con este.</p><p>Descargar imagen</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">pull</span> <span class="nf">registry:latest</span>
</pre></table></code></div></div><p>Crear contenedor</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-d</span> <span class="nf">-p</span> <span class="nf">5000:5000</span> <span class="nf">--name</span> <span class="nf">Nombre_Contenedor</span> <span class="nf">registry</span>
</pre></table></code></div></div><blockquote><p>El numero del puerto es modificable a gusto del usuario.</p></blockquote><h2 id="subirbajar-imagen-a-un-registro"><span class="mr-2">Subir/Bajar imagen a un registro</span><a href="#subirbajar-imagen-a-un-registro" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Es similar a subir una imagen a docker hub, con la diferencia que en vez de colocar nuestro usuario, colocamos la direccion/Nombre Equipo y puerto del registro.</p><h3 id="crear-tag"><span class="mr-2">Crear Tag</span><a href="#crear-tag" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Como requisito previo al igual que en HUB, es necesario ocupar <code class="language-plaintext highlighter-rouge">docker tag</code>.</p><p>Ejemplo</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nf">#</span> <span class="nf">Estructura</span>
<span class="nf">docker</span> <span class="nf">tag</span> <span class="nf">Imagen_Etiquetar</span> <span class="nf">Direccion</span><span class="nv">/Nombre:Puerto/Nombre_Imagen</span>
<span class="nf">#</span> <span class="nf">Ejemplo</span>
<span class="nf">docker</span> <span class="nf">tag</span> <span class="nf">ubuntu</span> <span class="nf">localhost:5555</span><span class="nv">/nuevo-ubuntu</span>
</pre></table></code></div></div><blockquote><p>No es recomendable ocupar localhost, solo referencia para ejemplo.</p><p>para buscar la imagen es <code class="language-plaintext highlighter-rouge">docker images Nombre_Imagen</code> ejemplo <code class="language-plaintext highlighter-rouge">docker images localhost:5555/*</code> y mostrara todos las imagenes que esten en el registro.</p></blockquote><h3 id="subir-imagen"><span class="mr-2">Subir imagen</span><a href="#subir-imagen" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Ejemplo subir imagen a registro</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nf">#</span> <span class="nf">HUB</span> <span class="nf">Docker</span>
<span class="nf">docker</span> <span class="nf">push</span> <span class="nf">nombre_usuario</span><span class="nv">/nombre_imagen:tag</span>
<span class="nf">#</span> <span class="nf">Registro</span>
<span class="nf">docker</span> <span class="nf">push</span> <span class="nf">Direccion</span><span class="nv">/NombreMaquina:Puerto/Nombre_Imagen:tag</span>
<span class="nf">#</span> <span class="nf">Ejemplo</span> <span class="nf">"Real"</span>
<span class="nf">docker</span> <span class="nf">push</span> <span class="nf">localhost:5555</span><span class="nv">/nuevo-ubuntu:latest</span>
</pre></table></code></div></div><blockquote><p>Docker sabra a que repostiorio subira la imagen. por lo tanto no es un dato que pida.</p><h3 id="descargar-imagen-1"><span class="mr-2">Descargar imagen</span><a href="#descargar-imagen-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></blockquote><p>Es igual como a cualquier imagen.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">pull</span> <span class="nf">nombre_usuario</span><span class="nv">/nombre_imagen:tag</span>
<span class="nf">#</span> <span class="nf">Registro</span>
<span class="nf">docker</span> <span class="nf">pull</span> <span class="nf">Direccion</span><span class="nv">/NombreMaquina:Puerto/Nombre_Imagen:tag</span>
<span class="nf">#</span> <span class="nf">Ejemplo</span> <span class="nf">"Real"</span>
<span class="nf">docker</span> <span class="nf">pull</span> <span class="nf">localhost:5555</span><span class="nv">/nuevo-ubuntu:latest</span>
</pre></table></code></div></div><blockquote><p>El tag por defecto es latest.</p></blockquote><h2 id="almacenamiento-docker-registry"><span class="mr-2">Almacenamiento Docker Registry</span><a href="#almacenamiento-docker-registry" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Registry al igual que cualquier imagen de docker, se puede especificar la opcion de donde se almacena la informacion de la imagen, con el volumen.</p><p>Por defecto es donde docker guarda los volumenes</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">/var/lib/docker/volumes/xxxxxxxxx/_data</span>
</pre></table></code></div></div><blockquote><p>para saber la direccion y mas informacion se ocupa <code class="language-plaintext highlighter-rouge">docker inspect Nombre_imagen</code></p></blockquote><p>Para dejar las imagenes en un lugar especifico, se realiza lo mismo que en cualquier imagen.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="nf">#</span> <span class="nf">crear</span> <span class="nf">carpeta</span>
<span class="nf">mkdir</span> <span class="nv">/Nombre_carpeta_equipo_local</span>
<span class="nf">#</span> <span class="nf">Comando</span> <span class="nf">para</span> <span class="nf">crear</span> <span class="nf">contenedor</span> <span class="nf">con</span> <span class="nf">volumen</span> <span class="nf">relacionado</span>
<span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-d</span> <span class="nf">--name</span> <span class="nf">Nombre_Contenedor</span> <span class="nf">-p</span> <span class="nf">5000:5000</span> <span class="nf">-v</span> <span class="nv">/Nombre_carpeta_equipo_local:/Nombre_carpeta_equipo_local</span> <span class="nf">Nombre_Imagen</span>

<span class="nf">#</span> <span class="nf">Ejemplo</span>

<span class="nf">mkdir</span> <span class="nv">/Registros</span>

<span class="nf">docker</span> <span class="nb">run</span> <span class="nf">-d</span> <span class="nf">--name</span> <span class="nf">registro_ejemplo</span> <span class="nf">-p</span> <span class="nf">5000:5000</span> <span class="nf">-v</span> <span class="nv">/Registros:/var/lib/registry</span> <span class="nf">registry</span>
</pre></table></code></div></div><blockquote><p><strong>“Destination”</strong> es el que contiene la direccion <code class="language-plaintext highlighter-rouge">/var/lib/registry</code>, en la informacion del contenedor, y es donde por defecto registry guarda las imagenes.</p></blockquote><h1 id="docker-swarm">Docker Swarm</h1><p>Permite crear un cluster de multiples nodos docker, permitiendo disponer de manera replicada, los “servicios”(Componente que se replica) que creamos, en varios nodos del cluster. Ademas de funcionar de manera independiente.</p><blockquote><p>Cada nodos es un entorno como vps, server dedicado o similar.</p></blockquote><ul><li>Servicios Swarm: El servicio es en resumen un contenedor que se esta ejecutando, como cuando se inicia un docker-compose y se especifican los servicios.</ul><h2 id="crear-cluster-docker-swarm"><span class="mr-2">Crear Cluster (Docker Swarm)</span><a href="#crear-cluster-docker-swarm" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><blockquote><p>No es posible colocar mas de un nodo dentro de un equipo (fisico, vps, etc.).</p><p>No es posible mas de un nodo en un equipo ya que es necesario, una direccion IP.</p></blockquote><p>El siguiente comando:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">swarm</span>
</pre></table></code></div></div><blockquote><p>permitira la gestion del cluster.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">services</span>
</pre></table></code></div></div><p>Permite crear servicios y tareas dentro del cluster.</p></blockquote><p>Finalmente para crear un Cluster se ocupa lo siguiente:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nf">#</span> <span class="nf">Inicio</span> <span class="nf">Normal</span>
<span class="nf">docker</span> <span class="nf">swarm</span> <span class="nf">init</span>

<span class="nf">#</span> <span class="nf">Inicio</span> <span class="nf">al</span> <span class="nf">poseer</span> <span class="nf">multipes</span> <span class="nf">IP</span>
<span class="nf">docker</span> <span class="nf">swarm</span> <span class="nf">init</span> <span class="nf">--advertise-addr</span> <span class="nf">xxx.xxx.xx.xxx</span>
</pre></table></code></div></div><blockquote><p>Cambiar las X por la direccion IP seleccionada.</p><p>Inicia un nuevo cluster, y asigna el equipo como maetro, ademas de entregar un token, que permite unir los equipos esclavos al maestro.</p><p>En caso de que se inicie en una VM(Ya que se dispone de multiples IP), se le debe asignar la direccion IP para iniciar correctamente.</p><p>Para evitar problemas iniciar swarm en equipos con IP estaticas, no dinamicas.</p></blockquote><p>Al ejecutar el comando entregara la siguiente informacion:</p><ul><li>Mostrará que es manager(maestro) o esclavo.<li>entregara el comando con el cual se podra agregar un worker, un equipo esclavo al maestro, este incluye un token.</ul><p>Se recomienda copiar el comando incluyendo el token, en caso de perderse, se puede obtener con el comando presentado a continuacion:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">info</span>
</pre></table></code></div></div><p>Donde mostrara, que docker swarm esta activado, ademas de algunas otras opciones como las siguientes:</p><ul><li>NodeID<li>Is Manager<li>ClusterID<li>Managers<li>Nodes<li>workers<blockquote><p>El swarm que esta como maestro(manager), tambien se puede ocupar como worker(esclavo). <strong>NO SE RECOMIENDA</strong></p></blockquote></ul><p>Finalmente, en caso de perder el comando se ocupa:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">swarm</span> <span class="nf">join-token</span> <span class="nf">worker</span>
</pre></table></code></div></div><h2 id="añadir-nodos"><span class="mr-2">Añadir nodos</span><a href="#añadir-nodos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para ver la informacion relacionada a los nodos se ocupa <code class="language-plaintext highlighter-rouge">docker info</code> en la seecion swarm.</p><h3 id="nodo-1-managermaestro"><span class="mr-2">Nodo 1 (Manager/Maestro)</span><a href="#nodo-1-managermaestro" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Para añadir los nodos primero se debe iniciar el docker swarm con la direccion IP, especifica en caso de poseer mas de una, en el PRIMER nodo a ocupar.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nf">#</span> <span class="nf">Inicio</span> <span class="nf">general</span>
<span class="nf">docker</span> <span class="nf">swarm</span> <span class="nf">init</span>
<span class="nf">#</span> <span class="nf">Inicio</span> <span class="nf">con</span> <span class="nf">IP</span> <span class="nf">especifica</span>
<span class="nf">docker</span> <span class="nf">swarm</span> <span class="nf">init</span> <span class="nf">--advertise-addr</span> <span class="nf">xxx.xxx.xx.xxx</span>
</pre></table></code></div></div><blockquote><p>Reemplazar las X con los numeros de la direccion IP.</p></blockquote><p>Se copia el <code class="language-plaintext highlighter-rouge">docker swarm join --token XXXX</code>(Las XXXX son el resto de la informacion del token).</p><h3 id="nodo-2-o-posteriorworkeresclavo"><span class="mr-2">Nodo 2 o posterior(Worker/Esclavo)</span><a href="#nodo-2-o-posteriorworkeresclavo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>En los nodos que desea unir al primero se debe tener docker instalado y agregar el <code class="language-plaintext highlighter-rouge">docker swarm join --token XXXX</code> que se obtuvo previamente.</p><p>Al realizar, el ingreso anterior se mostrara el mensaje <code class="language-plaintext highlighter-rouge">This node joined a swarm as a worker</code>, confirmando la union al primer nodo.</p><h2 id="trabajar-con-nodoscluster"><span class="mr-2">Trabajar con Nodos/Cluster</span><a href="#trabajar-con-nodoscluster" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para poder trabajar de manera comoda y obtener mejor informacion, en vez de ocupar el comando <code class="language-plaintext highlighter-rouge">docker info</code>, se ocupa el <code class="language-plaintext highlighter-rouge">docker node</code>, con el cual permitira algunas de las siguientes opciones:</p><ul><li>Listar/Ver nodos de un cluster.<li>Inspeccionar uno o mas nodos.<li>Promover un nodo a <code class="language-plaintext highlighter-rouge">Manager</code> desde el modo <code class="language-plaintext highlighter-rouge">Worker</code></ul><h3 id="comandos-nodo"><span class="mr-2">Comandos Nodo</span><a href="#comandos-nodo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="docker-node-ls"><span class="mr-2">Docker node ls</span><a href="#docker-node-ls" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>permite listar los nodos worker que estan unidos al manager, entregando la siguiente informacion.</p><ul><li>ID (Numero de identificacion unico)<li>HOSTNAME (Muestra lso nombres del nodo, ejemplo nodo1, nodo2)<li>STATUS<li>AVAILABILITY<li>MANAGER STATUS<li>ENGINE VERSION</ul><h4 id="docker-node-inspect"><span class="mr-2">Docker node inspect</span><a href="#docker-node-inspect" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>para saber la informacion de un nodo especifico se ocupa.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">node</span> <span class="nf">inspect</span> <span class="nf">HOSTNAME</span>

<span class="nf">#</span> <span class="nf">Ejemplo</span>
<span class="nf">docker</span> <span class="nf">node</span> <span class="nf">inspect</span> <span class="nf">nodo2</span>
</pre></table></code></div></div><blockquote><p>HOSTNAME es el numero del nodo, ejemplo nodo 3.</p></blockquote><p>Para obtener la informacion que entrega mas ordenada y no en formato <strong>JSON</strong>.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">node</span> <span class="nf">inspect</span> <span class="nf">--pretty</span> <span class="nf">HOSTNAME</span>
</pre></table></code></div></div><h4 id="docker-node-promote"><span class="mr-2">Docker node promote</span><a href="#docker-node-promote" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Para administar los manager(puede existir mas de uno), y colocar otro nodo existente como lider, ejemplo en caso de que se caiga el servicio.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">node</span> <span class="nf">promote</span> <span class="nf">HOSTNAME</span>
<span class="nf">#</span> <span class="nf">Ejemplo</span>
<span class="nf">docker</span> <span class="nf">node</span> <span class="nf">promote</span> <span class="nf">node6</span>
</pre></table></code></div></div><blockquote><p>Promueve el nodo6 a manager.</p><p>En el caso de que se promueva un nodo(Que seria el segundo nodo o posterior), posteriormente ademas del nodo lider(El inicial el cual en el status manager aparecera como <strong>Leader</strong>), este aparecera como <strong>Reachable</strong>(Alcanzable), esto confirma que en caso de que el primer nodo que esta como lider se caiga, o se le quite su status de Leader, el nodo6 tendra el control.</p><p>–&gt;docker node ls</p><div class="table-wrapper"><table><thead><tr><th style="text-align: center">HOSTNAME<th style="text-align: center">MANAGER STATUS<tbody><tr><td style="text-align: center">nodo1<td style="text-align: center">Leader<tr><td style="text-align: center">nodo2<td style="text-align: center"> <tr><td style="text-align: center">nodo3<td style="text-align: center"> <tr><td style="text-align: center">nodo4<td style="text-align: center"> <tr><td style="text-align: center">nodo5<td style="text-align: center"> <tr><td style="text-align: center">nodo6<td style="text-align: center">Reachable</table></div></blockquote><h4 id="docker-node-demote"><span class="mr-2">Docker node Demote</span><a href="#docker-node-demote" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Quita el privilegio de manager de un nodo y lo pasa a worker.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">node</span> <span class="nf">demote</span> <span class="nf">HOSTNAME</span> 
<span class="nf">#</span> <span class="nf">Ejemplo</span>
<span class="nf">docker</span> <span class="nf">node</span> <span class="nf">demote</span> <span class="nf">node1</span>
</pre></table></code></div></div><blockquote><p>En caso de quitar un nodo de lider, este no aceptara comandos ya que no posee los privilegios (en este caso, <strong>Leader</strong>), por lo tanto uno debe conectarse al nodo lider, que este disponible(con <code class="language-plaintext highlighter-rouge">docker node ls</code> se puede saber quien es el lider).</p><p>–&gt;docker node ls</p><div class="table-wrapper"><table><thead><tr><th style="text-align: center">HOSTNAME<th style="text-align: center">MANAGER STATUS<tbody><tr><td style="text-align: center">nodo1<td style="text-align: center"> <tr><td style="text-align: center">nodo2<td style="text-align: center"> <tr><td style="text-align: center">nodo3<td style="text-align: center"> <tr><td style="text-align: center">nodo4<td style="text-align: center"> <tr><td style="text-align: center">nodo5<td style="text-align: center"> <tr><td style="text-align: center">nodo6<td style="text-align: center">Leader</table></div></blockquote><h4 id="docker-swarm-leave"><span class="mr-2">Docker Swarm leave</span><a href="#docker-swarm-leave" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Este comando sirve para que un nodo determinado se de, dé baja de un cluster existente.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">swarm</span> <span class="nf">leave</span>
</pre></table></code></div></div><blockquote><p>Este comando es necesario que se ejecute en el nodo, el cual se desea dar de baja del cluster.</p><p>No sale del cluster solo, se da de baja, pero posteriormente es posible ingresarlo con el comando JOIN.</p><div class="table-wrapper"><table><thead><tr><th style="text-align: center">HOSTNAME<th style="text-align: center">STATUS<tbody><tr><td style="text-align: center">nodo1<td style="text-align: center">Ready<tr><td style="text-align: center">nodo2<td style="text-align: center">Down</table></div></blockquote><h4 id="docker-node-rm"><span class="mr-2">Docker node rm</span><a href="#docker-node-rm" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Sirve para sacar un nodo de manera permanente de un cluster existente.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">node</span> <span class="nf">rm</span> <span class="nf">HOSTNAME</span>
<span class="nf">#</span> <span class="nf">Ejemplo</span>
<span class="nf">docker</span> <span class="nf">node</span> <span class="nf">rm</span> <span class="nf">nodo3</span>
</pre></table></code></div></div><blockquote><p>En caso, de querer añadir nuevamente el nodo al cluster, se ocupa <strong>docker swarm join-token <code class="language-plaintext highlighter-rouge">worker/manager</code></strong>(Se puede elegir como se desea agregar un nodo a un cluster <strong><code class="language-plaintext highlighter-rouge">worker/manager</code></strong>), en el nodo lider y asi obtener el token(el comando completo, el cual se pegara y ejecutara en el nodo a agregar), en el nodo que se desea agregar.</p></blockquote><h2 id="servicios-docker-swarm"><span class="mr-2">Servicios (Docker Swarm)</span><a href="#servicios-docker-swarm" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para trabajar con servicios se utiliza <code class="language-plaintext highlighter-rouge">docker service</code>. Y se deben ejecutar en el nodo <strong>Leader</strong>. Ya que otros nodos no permitiran su ejecucion.</p><h3 id="crear-servicio-docker-service-create"><span class="mr-2">Crear servicio (docker service create)</span><a href="#crear-servicio-docker-service-create" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Crear un servicio se utiliza el comando: <code class="language-plaintext highlighter-rouge">docker service create</code>.</p><p>Pero es posible personalizar el servicio desde la linea de comando al crear dicho servicio.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">service</span> <span class="nf">create</span> <span class="nf">--replicas</span> <span class="nf">N°</span> <span class="nf">--name</span> <span class="nf">NOMBRE_SERVICIO</span> <span class="nf">IMAGEN_DOCKER</span> <span class="nf">COMANDO_EJECUTAR</span>

<span class="nf">#</span> <span class="nf">Ejemplo</span>
<span class="nf">docker</span> <span class="nf">service</span> <span class="nf">create</span> <span class="nf">--replicas</span> <span class="mf">1</span> <span class="nf">--servicio0</span> <span class="nf">alphine-linux</span> <span class="nf">ping</span> <span class="nf">google.com</span>
</pre></table></code></div></div><p>Descripcion:</p><ul><li><strong>–replicas</strong>: es la cantidad de veces que el servicio se ejecutara en los nodos disponibles.<li><strong>N°</strong>: Es el numero de replicas, con el cual se ejecutara.<li><strong>–name</strong>: El nombre que llevara el servicio el cual se va a crear.<li><strong>Imagen_Docker</strong>: La imagen “base” que se ocupara para el servicio.<li><strong>Comando</strong>: Lo que se ejecutara en la imagen del servicio.</ul><h3 id="ver-servicios-docker-service-ls"><span class="mr-2">Ver servicios (Docker Service ls)</span><a href="#ver-servicios-docker-service-ls" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Para ver los servicios que estan en ejecucion se utiliza: <code class="language-plaintext highlighter-rouge">docker service ls</code>.</p><div class="table-wrapper"><table><thead><tr><th style="text-align: center">ID<th style="text-align: center">NAME<th style="text-align: center">MODE<th style="text-align: center">REPLICAS<th style="text-align: center">IMAGE<th style="text-align: center">PORTS<tbody><tr><td style="text-align: center">xxxXXxxx<td style="text-align: center">Servicio0<td style="text-align: center">Replicated<td style="text-align: center"><strong>1/1</strong><td style="text-align: center">alphine-linux<td style="text-align: center"> </table></div><h3 id="ver-informacion-servicio-especifico-docker-service-ps"><span class="mr-2">Ver Informacion Servicio especifico (docker service ps)</span><a href="#ver-informacion-servicio-especifico-docker-service-ps" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Para Sirve para ver mas informacion de un servicio en especifico como el nodo en el que se encuentra, hace cuanto tiempo se creo dicho servicio, etc.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">service</span> <span class="nf">ps</span> <span class="nf">NOMBRE_SERVICIO</span>
<span class="nf">#</span> <span class="nf">EJEMPLO</span>
<span class="nf">docker</span> <span class="nf">service</span> <span class="nf">ps</span> <span class="nf">Servicio0</span>
</pre></table></code></div></div><h3 id="ver-informacion-sobre-ejecucion-de-un-servicio-docker-service-logs"><span class="mr-2">Ver Informacion sobre ejecucion de un servicio (docker service logs)</span><a href="#ver-informacion-sobre-ejecucion-de-un-servicio-docker-service-logs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Para poder ver lo que ha realizado un servicio en ejecucion, se debe obtener el log de dicho servicio, con el siguiente comando:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">service</span> <span class="nf">logs</span> <span class="nf">NOMBRE_SERVICIO</span>
<span class="nf">#</span> <span class="nf">Ejemplo</span>
<span class="nf">docker</span> <span class="nf">serveice</span> <span class="nf">logs</span> <span class="nf">Servicio0</span>
</pre></table></code></div></div><h3 id="ver-toda-la-informacion-relacionada-a-un-servicio-docker-service-inspect"><span class="mr-2">Ver toda la informacion relacionada a un servicio (docker service inspect)</span><a href="#ver-toda-la-informacion-relacionada-a-un-servicio-docker-service-inspect" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>funciona como cualquier otro inspect.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">service</span> <span class="nf">inspect</span> <span class="nf">--pretty</span> <span class="nf">Nombre_Servicio</span>
</pre></table></code></div></div><blockquote><p>–pretty sirve para ver de manera mas ordenada la informacion que se entrega.</p></blockquote><h3 id="escalar-servicio"><span class="mr-2">Escalar Servicio</span><a href="#escalar-servicio" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>para escalar, replicar o repetir un servicio, se ocupa:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">service</span> <span class="nb">scale</span> <span class="nf">Nombre_Servicio=Nuevo_N°_Replicas</span>

<span class="nf">#</span> <span class="nf">Ejemplo</span>
<span class="nf">docker</span> <span class="nf">service</span> <span class="nb">scale</span> <span class="nf">Servicio0=3</span>
</pre></table></code></div></div><blockquote><p>cada vez que se inicia un servicio este es una tarea.</p><p>Solo se puede escalar el servicio el numero de nodos, mientras los recursos lo permitan.</p><p>Si no posee recursos suficientes, entregara un error.</p></blockquote><p>Si se desea disminuir el numero de replicas se vuelve a ejecutar el comando anterior con un nuevo numero de replicas, pero en este caso un N° inferior.</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">service</span> <span class="nb">scale</span> <span class="nf">Service0=1</span>
</pre></table></code></div></div><h3 id="borrar-un-servicio"><span class="mr-2">Borrar un servicio</span><a href="#borrar-un-servicio" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Para borrar un servicio se ocupa:</p><div class="language-ps highlighter-rouge"><div class="code-header"> <span data-label-text="Ps"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nf">docker</span> <span class="nf">service</span> <span class="nf">rm</span> <span class="nf">Nombre_Servicio</span>

<span class="nf">#</span> <span class="nf">Ejemplo</span>
<span class="nf">docker</span> <span class="nf">service</span> <span class="nf">rm</span> <span class="nf">Service0</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/docker/'>docker</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/docker/" class="post-tag no-text-decoration" >docker</a> <a href="/tags/imagenes/" class="post-tag no-text-decoration" >imagenes</a> <a href="/tags/contenedor/" class="post-tag no-text-decoration" >contenedor</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Comandos%20Docker%20-%20jrCoding%20Docs&url=https%3A%2F%2Fjrguevara.github.io%2Fposts%2Fcomandos-docker%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Comandos%20Docker%20-%20jrCoding%20Docs&u=https%3A%2F%2Fjrguevara.github.io%2Fposts%2Fcomandos-docker%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fjrguevara.github.io%2Fposts%2Fcomandos-docker%2F&text=Comandos%20Docker%20-%20jrCoding%20Docs" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/electron-recordatorios-app-parte-00-introduccion/">Electron - RecordatoriosApp| Parte 0 - Introducción al Tutorial</a><li><a href="/posts/extension-vscode/">Extensión para Visual Studio Code</a><li><a href="/posts/ubuntu-nginx/">Ubuntu LEMP Stack</a><li><a href="/posts/LEMP-ec2-mazon-linux-2/">LEMP Stack en EC2 Amazon Linux 2</a><li><a href="/posts/next-s3/">NextJS + S3</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/programacion/">programacion</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/reactjs/">reactjs</a> <a class="post-tag" href="/tags/nextjs/">nextjs</a> <a class="post-tag" href="/tags/ecommerce/">ecommerce</a> <a class="post-tag" href="/tags/frontend/">frontend</a> <a class="post-tag" href="/tags/fundamentos/">fundamentos</a> <a class="post-tag" href="/tags/nodejs/">nodeJS</a> <a class="post-tag" href="/tags/vue/">vue</a> <a class="post-tag" href="/tags/electron/">electron</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/docker-parte-1/"><div class="card-body"> <em class="small" data-ts="1678856400" data-df="DD/MM/YYYY" > 14/03/2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Docker</h3><div class="text-muted small"><p> ¿Qué es Docker? Docker es una plataforma de software que le permite crear, probar e implementar aplicaciones rápidamente. Docker empaqueta el software en unidades estandarizadas llamadas contene...</p></div></div></a></div><div class="card"> <a href="/posts/electron-recordatorios-app-parte-02-datos-almacenamiento/"><div class="card-body"> <em class="small" data-ts="1761714000" data-df="DD/MM/YYYY" > 28/10/2025 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Electron - Recordatorios App | Parte 2 - Datos y Almacenamiento</h3><div class="text-muted small"><p> Parte 2: Sistema de Datos y Almacenamiento Objetivo Implementar el sistema de almacenamiento de datos con comunicación IPC entre proceso principal y renderer. Paso 1: Actualizar main.js con funci...</p></div></div></a></div><div class="card"> <a href="/posts/electron-recordatorios-app-parte-01-configuracion-inicial/"><div class="card-body"> <em class="small" data-ts="1761541200" data-df="DD/MM/YYYY" > 26/10/2025 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Electron - Recordatorios App | Parte 1 - Configuración Inicial del Proyecto</h3><div class="text-muted small"><p> Parte 1: Configuración Inicial del Proyecto Objetivo Configurar la estructura básica del proyecto Electron con todos los archivos necesarios. Paso 1: Crear estructura de carpetas 1 2 3 4 5 6 7 8...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/yii2-primeros-pasos/" class="btn btn-outline-primary" prompt="Older"><p>Yii2 Primeros pasos</p></a> <a href="/posts/docker-parte-1/" class="btn btn-outline-primary" prompt="Newer"><p>Docker</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/programacion/">programacion</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/reactjs/">reactjs</a> <a class="post-tag" href="/tags/nextjs/">nextjs</a> <a class="post-tag" href="/tags/ecommerce/">ecommerce</a> <a class="post-tag" href="/tags/frontend/">frontend</a> <a class="post-tag" href="/tags/fundamentos/">fundamentos</a> <a class="post-tag" href="/tags/nodejs/">nodeJS</a> <a class="post-tag" href="/tags/vue/">vue</a> <a class="post-tag" href="/tags/electron/">electron</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/jr.guevara">Jaime Guevara</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/es.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
